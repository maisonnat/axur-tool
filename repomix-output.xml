<repomix><file_summary>This file is a merged representation of a subset of the codebase, containing specifically included files and files not matching ignore patterns, combined into a single document by Repomix.
The content has been processed where comments have been removed, content has been formatted for parsing in xml style, content has been compressed (code blocks are separated by ‚ãÆ---- delimiter).<purpose>This file contains a packed representation of a subset of the repository&apos;s contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.</purpose><file_format>The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Repository files, each consisting of:
  - File path as an attribute
  - Full contents of the file</file_format><usage_guidelines>- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
- Pay special attention to the Repository Description. These contain important context and guidelines specific to this project.
- Pay special attention to the Repository Instruction. These contain important context and guidelines specific to this project.</usage_guidelines><notes>- Some files may have been excluded based on .gitignore rules and Repomix&apos;s configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: docs/**/*.md, .agent/memory/*.md, .agent/skills/*/SKILL.md
- Files matching these patterns are excluded: **/*.lock, **/target/**, **/node_modules/**, **/dist/**, **/.git/**, **/*.png, **/*.jpg, **/*.ico, **/*.svg
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Code comments have been removed from supported file types
- Content has been formatted for parsing in xml style
- Content has been compressed - code blocks are separated by ‚ãÆ---- delimiter
- Files are sorted by Git change count (files with more changes are at the bottom)
- Git diffs from the worktree and staged changes are included</notes></file_summary><user_provided_header>Antigravity Project Context - Generated by Repomix</user_provided_header><directory_structure>docs/api-rate-limit.md
docs/api-rate-limits.md
docs/API-Reference.md
docs/Architecture.md
docs/book/src/00_intro.md
docs/book/src/chapter_1.md
docs/book/src/SUMMARY.md
docs/Changelog.md
docs/client-side-language-switching.md
docs/Developer-Guide.md
docs/Error-Codes.md
docs/Home.md
docs/modular-architecture/DECISIONS.md
docs/modular-architecture/DESIGN.md
docs/modular-architecture/HANDOFF.md
docs/modular-architecture/MILESTONES.md
docs/modular-architecture/README.md
docs/onboarding/ARCHITECTURE.md
docs/SECURITY_AUDIT.md
docs/slack-beta-invite-ptbr.md
docs/User-Guide.md
docs/ZERO_COST_POLICY.md</directory_structure><files>This section contains the contents of the repository&apos;s files.<file path="docs/API-Reference.md"># API Reference

## Base URL
- Development: `http://localhost:3001/api`
- Production: Configured via environment

## Authentication

### Login
```http
POST /api/auth/login
Content-Type: application/json

{
  &quot;email&quot;: &quot;user@example.com&quot;,
  &quot;password&quot;: &quot;password123&quot;
}
```

**Response (200)**
```json
{
  &quot;status&quot;: &quot;2fa_required&quot;,
  &quot;token&quot;: &quot;eyJ...&quot;
}
```

### 2FA Verification
```http
POST /api/auth/2fa
Content-Type: application/json

{
  &quot;code&quot;: &quot;123456&quot;
}
```

**Response (200)**
```json
{
  &quot;status&quot;: &quot;success&quot;
}
```

### Finalize Session
```http
POST /api/auth/finalize
```

**Response (200)**
Sets session cookie and returns:
```json
{
  &quot;status&quot;: &quot;authenticated&quot;
}
```

### Logout
```http
POST /api/auth/logout
```

**Response (200)**
Clears session cookie.

---

## Tenants

### List Tenants
```http
GET /api/tenants
Cookie: session=...
```

**Response (200)**
```json
[
  {
    &quot;key&quot;: &quot;tenant-uuid-1&quot;,
    &quot;name&quot;: &quot;Tenant Name 1&quot;
  },
  {
    &quot;key&quot;: &quot;tenant-uuid-2&quot;,
    &quot;name&quot;: &quot;Tenant Name 2&quot;
  }
]
```

---

## Reports

### Generate Report
```http
POST /api/report
Cookie: session=...
Content-Type: application/json

{
  &quot;tenant_key&quot;: &quot;tenant-uuid&quot;,
  &quot;from_date&quot;: &quot;2024-01-01&quot;,
  &quot;to_date&quot;: &quot;2024-01-31&quot;,
  &quot;language&quot;: &quot;es&quot;
}
```

**Response (200)**
```json
{
  &quot;html&quot;: &quot;&lt;!DOCTYPE html&gt;...&quot;
}
```

**Errors**
- `400`: Invalid parameters
- `401`: Not authenticated
- `403`: No access to tenant
- `500`: Report generation failed

---

## Error Responses

All error responses follow this format:
```json
{
  &quot;error&quot;: &quot;Error message description&quot;
}
```

### Status Codes
| Code | Description |
|------|-------------|
| 200 | Success |
| 400 | Bad Request - Invalid parameters |
| 401 | Unauthorized - Not authenticated |
| 403 | Forbidden - No access |
| 500 | Internal Server Error |</file><file path="docs/Architecture.md"># Architecture

## System Overview

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     Frontend        ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ      Backend        ‚îÇ
‚îÇ   (Leptos/WASM)     ‚îÇ     ‚îÇ      (Axum)         ‚îÇ
‚îÇ   localhost:8080    ‚îÇ     ‚îÇ   localhost:3001    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                       ‚îÇ
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ     Axur API        ‚îÇ
                            ‚îÇ  (External Service) ‚îÇ
                            ‚îÇ  api.axur.cloud     ‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Components

### Frontend (Leptos/WASM)
- **Technology**: Leptos framework compiled to WebAssembly
- **Responsibilities**:
  - User interface rendering
  - Form handling and validation
  - Client-side state management
  - API communication with backend
  - i18n (Spanish, English, Portuguese)

### Backend (Axum)
- **Technology**: Axum web framework with Tokio runtime
- **Responsibilities**:
  - Proxy authentication to Axur API
  - Session management (cookies)
  - Report generation orchestration
  - CORS handling
  - Security headers

### Core (axur-core)
- **Technology**: Shared Rust library
- **Responsibilities**:
  - Axur API client
  - Data types and models
  - HTML report generation
  - i18n dictionaries

## Authentication Flow

```mermaid
sequenceDiagram
    participant U as User
    participant F as Frontend
    participant B as Backend
    participant A as Axur API

    U-&gt;&gt;F: Enter credentials
    F-&gt;&gt;B: POST /api/auth/login
    B-&gt;&gt;A: POST /auth/login
    A--&gt;&gt;B: Token + 2FA required
    B--&gt;&gt;F: Needs 2FA

    U-&gt;&gt;F: Enter 2FA code
    F-&gt;&gt;B: POST /api/auth/2fa
    B-&gt;&gt;A: POST /auth/2fa
    A--&gt;&gt;B: Success
    B-&gt;&gt;A: POST /auth/finalize
    A--&gt;&gt;B: Session confirmed
    B--&gt;&gt;F: Set-Cookie (session)
    F-&gt;&gt;U: Redirect to dashboard
```

## Report Generation Flow

```mermaid
sequenceDiagram
    participant U as User
    participant F as Frontend
    participant B as Backend
    participant A as Axur API
    participant C as Core

    U-&gt;&gt;F: Select tenant, dates, language
    F-&gt;&gt;B: POST /api/report
    B-&gt;&gt;A: GET /tenants/{id}/incidents
    A--&gt;&gt;B: Incident data
    B-&gt;&gt;A: GET /tenants/{id}/statistics
    A--&gt;&gt;B: Statistics data
    B-&gt;&gt;C: Generate HTML report
    C--&gt;&gt;B: HTML string
    B--&gt;&gt;F: HTML report
    F-&gt;&gt;U: Display preview
    U-&gt;&gt;F: Download HTML
```

## Data Flow

### State Management (Frontend)
```
AppState (Global)
‚îú‚îÄ‚îÄ is_authenticated: RwSignal&lt;bool&gt;
‚îú‚îÄ‚îÄ current_page: RwSignal&lt;Page&gt;
‚îú‚îÄ‚îÄ error_message: RwSignal&lt;Option&lt;String&gt;&gt;
‚îî‚îÄ‚îÄ ui_language: RwSignal&lt;UiLanguage&gt;
```

### Session Management (Backend)
- HTTP-only cookies for session tokens
- Session state stored in Axur API
- CORS configured for frontend origin

## Security Architecture

### OWASP 2025 Compliance
- **A01 (Access Control)**: Middleware auth on all protected routes
- **A03 (Supply Chain)**: Regular `cargo audit` checks
- **A10 (Error Handling)**: Proper `Result`/`Option` handling, no panics

### Headers
- `X-Content-Type-Options: nosniff`
- `X-Frame-Options: DENY`
- `Content-Security-Policy: default-src &apos;self&apos;`

### CORS
- Allowed origins: Frontend development server
- Credentials: Included (for cookies)</file><file path="docs/Changelog.md"># Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [1.0.0] - 2024-12-22

### Added
- **Full-stack Rust application** with Axum backend and Leptos/WASM frontend
- **3-step authentication flow**: Login ‚Üí 2FA ‚Üí Finalization
- **Multi-language support**: Spanish, English, Portuguese (UI and reports)
- **Tenant selection** with autocomplete/search functionality
- **Report generation** with HTML output and download
- **Security features**: 
  - OWASP 2025 compliance checklist
  - RustSec/cargo-audit integration
  - Proper error handling patterns
- **Agent workflows**:
  - `/test-fix-loop` - Automated testing with fix proposals
  - `/security-audit` - Security audit workflow
  - `/fullstack-sync` - Full-stack synchronization
  - `/update-wiki` - Wiki documentation maintenance

### Security
- CORS configuration for frontend-backend communication
- HTTP-only session cookies
- Security headers (X-Content-Type-Options, X-Frame-Options, CSP)
- Input validation on all endpoints

### Documentation
- README with badges and quick start
- User Guide for end users
- Developer Guide for contributors
- Architecture documentation with diagrams
- API Reference

---

## [Unreleased]

### Planned
- [ ] Persistent language preference (localStorage)
- [ ] PDF export option
- [ ] Scheduled report generation
- [ ] Email delivery of reports</file><file path="docs/Home.md"># Axur Tool Wiki

Welcome to the Axur Tool documentation!

## Quick Links
- [User Guide](User-Guide.md) - How to use the application
- [Developer Guide](Developer-Guide.md) - Development setup and contribution
- [Architecture](Architecture.md) - System design overview
- [API Reference](API-Reference.md) - Backend endpoints
- [Changelog](Changelog.md) - Version history

## About
Axur Tool is a full-stack Rust web application for generating Axur External Threat Intelligence reports.

### Features
- **Full Rust Stack**: Backend (Axum) + Frontend (Leptos/WASM)
- **3-Step Auth Flow**: Login ‚Üí 2FA ‚Üí Finalization
- **Multi-language UI**: Spanish, English, Portuguese
- **Tenant Autocomplete**: Search and filter tenants
- **Report Generation**: Beautiful HTML reports with Axur branding
- **Security First**: OWASP 2025, RustSec audits, proper error handling</file><file path="docs/User-Guide.md"># User Guide

## Getting Started

### 1. Access the Application
Navigate to the application URL in your web browser.

### 2. Select Language
At the bottom of the login page, select your preferred language:
- **Espa√±ol** (Spanish)
- **English**
- **Portugu√™s** (Portuguese)

### 3. Login
1. Enter your Axur email address
2. Enter your password
3. Click &quot;Continue&quot; / &quot;Continuar&quot;

### 4. Two-Factor Authentication (2FA)
1. Open your authenticator app (Google Authenticator, Authy, etc.)
2. Enter the 6-digit code
3. Click &quot;Verify&quot; / &quot;Verificar&quot;

## Dashboard

After successful login, you&apos;ll see the report generation dashboard.

### Generating a Report

1. **Select Tenant**: Use the dropdown to search and select a tenant
2. **Choose Date Range**: 
   - From Date: Start of the reporting period
   - To Date: End of the reporting period
3. **Select Language**: Choose the language for the generated report
4. **Generate**: Click the &quot;Generate Report&quot; button

### Downloading Reports

Once the report is generated:
1. A preview will appear in the right panel
2. Click &quot;Download HTML&quot; to save the report to your computer

## Troubleshooting

### Login Issues
- **Invalid credentials**: Verify your email and password are correct
- **2FA fails**: Ensure your device time is synchronized

### No Tenants Displayed
- Contact your Axur administrator to verify tenant access

### Report Generation Errors
- Check that the date range is valid
- Ensure you have selected a tenant
- Try refreshing the page</file><file path="docs/api-rate-limit.md"># Axur API Rate Limit Rules

Cuando escribas o modifiques c√≥digo que interact√∫e con la API de Axur, SIEMPRE aplica estas reglas:

## Regla 1: Delay Entre Requests
- A√±ade `tokio::time::sleep(Duration::from_secs(1))` entre llamadas consecutivas a la API
- Para operaciones en lotes, considera 2 segundos de delay

## Regla 2: Retry con Backoff para 429
- Implementa retry autom√°tico cuando recibas HTTP 429
- M√°ximo 3 reintentos
- Usa backoff exponencial: 1s ‚Üí 2s ‚Üí 4s

## Regla 3: L√≠mites de Requests
- General/TH: m√°ximo 60 requests/minuto
- No m√°s de 5 requests concurrentes a la vez
- Procesar secuencialmente es preferible a paralelo

## Regla 4: Batching
- Limita operaciones bulk a m√°ximo 5-10 items por lote
- Para Threat Hunting Preview: m√°ximo 5 dominios √∫nicos

## Regla 5: Documentar Consumo
- Cuando crees funciones que hacen m√∫ltiples llamadas API, documenta el estimado de requests
- Ejemplo: `// Esta funci√≥n hace ~20 requests (10 POST + 10 GET polling)`

## C√≥digo Obligatorio para API Calls

```rust
// Patr√≥n obligatorio para loops con API calls
for item in items {
    let result = api_call(item).await?;
    tokio::time::sleep(std::time::Duration::from_secs(1)).await; // OBLIGATORIO
}
```

```rust
// Patr√≥n obligatorio para manejo de 429
if resp.status() == reqwest::StatusCode::TOO_MANY_REQUESTS {
    tracing::warn!(&quot;Rate limited, waiting before retry...&quot;);
    tokio::time::sleep(std::time::Duration::from_secs(2)).await;
    // retry logic...
}
```</file><file path="docs/api-rate-limits.md"># Axur API Rate Limits

Reference documentation for Axur API rate limits to avoid HTTP 429 errors.

## Documented Limits

| Endpoint Category | Rate Limit | Notes |
|------------------|------------|-------|
| **General** (Tickets, TH, etc.) | 60 requests/min | Most common limit |
| **Web Complaints** | 3 requests/second | Strict per-second limit |
| **IoC API** | 120 requests/min | Higher capacity |
| **Feed API** (per feedId) | 1 request/30 seconds | Per-resource limit |
| **Credentials API** | 1,150 requests/min | Highest capacity |

## Best Practices

### 1. Delay Between Requests
```rust
// Add 1 second delay between consecutive API calls
tokio::time::sleep(std::time::Duration::from_secs(1)).await;
```

### 2. Retry with Exponential Backoff (from Axur docs)
```python
MAX_RETRIES = 3
INITIAL_WAIT = 1.0  # seconds
WAIT_INCREMENT = 0.5  # increase per retry

if response.status_code == 429:
    time.sleep(wait_time)
    wait_time += WAIT_INCREMENT
    return make_request(retries + 1, wait_time)
```

### 3. Batch Operations
- For Threat Hunting Preview: Limit to **5 unique domains** max
- Process domains **sequentially**, not in parallel
- Add delay between each domain search

## Current Implementation Concerns

When searching 10 domains √ó 2 sources (Signal-Lake + Credentials):
- 20 POST requests (start searches)
- ~20 GET requests (poll results)
- Total: ~40+ requests in seconds

**Solution**: Sequential processing with 1-second delays.

## References

- File: `axur-api-doc/doc api axur 15 12 2025 (1).md`
- Rate limit handling example: Lines 3833-3867
- TH API docs: `axur-api-doc/TH API.md`</file><file path="docs/book/src/00_intro.md"># The Living Codex of Axur Web

Welcome to the central nervous system of **Axur Web**. 

This documentation is not a static manual; it is a **Living Codex** that evolves synchronously with the codebase. It unifies:

1.  **The Manual (Part I)**: Human-readable guides for deployment and operations.
2.  **The Memory (Part II)**: The AI Agent&apos;s internal context, architectural decisions, and lessons learned.
3.  **The Law (Part III)**: The Constitution and strict governance protocols.

## How to Read This
- **Operators**: Start with [Part I](../../.agent/workflows/deploy.md).
- **Developers**: Review [The Constitution](../../.agent/rules/00_CONSTITUTION.md) before pushing code.
- **Agents**: Index `knowledge/` before planning new features.

---
*Generated by the Axur Web Architect Agent.*</file><file path="docs/book/src/chapter_1.md"># Chapter 1</file><file path="docs/book/src/SUMMARY.md"># Summary

[Introduction](00_intro.md)

# Part I: The Manual
- [Deploy &amp; Operations](../../.agent/workflows/deploy.md)
- [Zero Cost Policy](../../docs/ZERO_COST_POLICY.md)
- [API Rate Limits](../../docs/api-rate-limit.md)

# Part II: The Brain (Memory)
- [Lessons Learned](../../knowledge/LESSONS_LEARNED.md)
- [Project Analysis](../../knowledge/analysis_praefectus.md)
- [Codebase Distillation](../../knowledge/codebase_distillation_aid.md)

# Part III: The Law (Governance)
- [The Constitution](../../.agent/rules/00_CONSTITUTION.md)
- [Identity Protocol](../../.agent/rules/00_identity.md)</file><file path="docs/client-side-language-switching.md"># Client-Side Report Language Switching

## Overview

This feature allows users to switch the language of a generated HTML report without regenerating it from the server. The language selector appears in the top-right corner of the report view.

## Architecture

### Files

| File | Purpose |
|------|---------|
| `crates/core/src/report/language_switcher.rs` | Core module with UI and JS generation |
| `crates/core/translations/*.json` | Translation files (en, es, pt-br) |
| `crates/core/src/report/html.rs` | Integration into HTML template |

### How It Works

1. **Embedded Translations**: All 3 JSON translation files (~48KB total, ~12KB gzipped) are embedded directly in the HTML as a `&lt;script type=&quot;application/json&quot;&gt;` block.

2. **Language Selector UI**: A floating button group in the top-right corner:
   ```html
   &lt;div id=&quot;lang-switcher&quot; class=&quot;fixed top-4 right-4 z-50 ...&quot;&gt;
       &lt;button onclick=&quot;setReportLanguage(&apos;es&apos;)&quot;&gt;ES&lt;/button&gt;
       &lt;button onclick=&quot;setReportLanguage(&apos;en&apos;)&quot;&gt;EN&lt;/button&gt;
       &lt;button onclick=&quot;setReportLanguage(&apos;pt&apos;)&quot;&gt;PT&lt;/button&gt;
   &lt;/div&gt;
   ```

3. **JavaScript Switcher**: The `setReportLanguage(lang)` function updates all elements with `data-i18n` attributes:
   ```html
   &lt;h1 data-i18n=&quot;metrics_title&quot;&gt;M√©tricas Generales&lt;/h1&gt;
   ```
   becomes:
   ```html
   &lt;h1 data-i18n=&quot;metrics_title&quot;&gt;General Metrics&lt;/h1&gt;
   ```

4. **Preference Persistence**: User&apos;s language choice is saved to `localStorage` and restored on page reload.

## Adding Translatable Text

### 1. Add HTML with `data-i18n` attribute

```rust
format!(r#&quot;&lt;h2 data-i18n=&quot;my_new_key&quot;&gt;{}&lt;/h2&gt;&quot;#, translations.get(&quot;my_new_key&quot;))
```

### 2. Add key to all translation files

**`translations/en.json`:**
```json
&quot;my_new_key&quot;: &quot;My New Feature&quot;
```

**`translations/es.json`:**
```json
&quot;my_new_key&quot;: &quot;Mi Nueva Funcionalidad&quot;
```

**`translations/pt-br.json`:**
```json
&quot;my_new_key&quot;: &quot;Minha Nova Funcionalidade&quot;
```

### 3. For dynamic values (interpolation)

```rust
format!(
    r#&quot;&lt;p data-i18n=&quot;count_message&quot; data-i18n-params=&apos;{{&quot;count&quot;:&quot;{}&quot;}}&apos;&gt;{}&lt;/p&gt;&quot;#,
    count,
    translations.format(&quot;count_message&quot;, &amp;[(&quot;count&quot;, &amp;count.to_string())])
)
```

JSON:
```json
&quot;count_message&quot;: &quot;Found {count} items&quot;
```

## API Reference

### `embed_translations_json() -&gt; String`
Generates `&lt;script&gt;` block with all translations as nested JSON object.

### `language_selector_ui(current_lang: &amp;str) -&gt; String`
Generates the floating language selector HTML.

### `language_switcher_script() -&gt; String`
Generates the JavaScript code for `setReportLanguage()` function.

### `generate_language_switching_components(current_lang: &amp;str) -&gt; (String, String, String)`
Convenience function returning (head_content, body_start, body_end) tuple.

## Notes

- The selector is hidden when printing (`no-print` class)
- Does not work with legacy `generate_full_report_html()` - only with `generate_report_with_plugins()`
- For future migration of legacy slides, add `data-i18n` attributes during the migration process</file><file path="docs/Developer-Guide.md"># Developer Guide

## Tech Stack

| Component | Technology |
|-----------|------------|
| Backend | Rust + Axum |
| Frontend | Rust + Leptos (WASM) |
| Shared | axur-core crate |
| Build | wasm-pack, trunk |
| Deployment | Leapcell (Native Rust) |

## Prerequisites

```bash
# Install Rust
curl --proto &apos;=https&apos; --tlsv1.2 -sSf https://sh.rustup.rs | sh

# Add WASM target
rustup target add wasm32-unknown-unknown

# Install tools
cargo install wasm-pack trunk cargo-audit
```

## Development Setup

### Starting the Backend
```bash
cargo run -p axur-backend
# Server runs at http://localhost:3001
```

### Starting the Frontend
```powershell
# Windows
.\build-frontend.ps1 -Serve
# Frontend runs at http://localhost:8080
```

Or using trunk directly:
```bash
cd crates/frontend
trunk serve
```

## Project Structure

```
axur-web/
‚îú‚îÄ‚îÄ crates/
‚îÇ   ‚îú‚îÄ‚îÄ backend/          # Axum REST API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.rs       # Entry point
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib.rs        # App configuration
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/       # API endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ middleware/   # Auth, security
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Cargo.toml
‚îÇ   ‚îú‚îÄ‚îÄ frontend/         # Leptos WASM SPA
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib.rs        # App state, routing
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.rs        # API client
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ i18n.rs       # Translations
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/        # Login, Dashboard
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components/   # Reusable UI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Cargo.toml
‚îÇ   ‚îî‚îÄ‚îÄ core/             # Shared library
‚îÇ       ‚îú‚îÄ‚îÄ src/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ lib.rs        # Public API
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ api/          # Axur API client
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ report/       # HTML generation
‚îÇ       ‚îî‚îÄ‚îÄ Cargo.toml
‚îú‚îÄ‚îÄ .agent/workflows/     # Agent automation
‚îú‚îÄ‚îÄ docs/                 # Documentation
‚îî‚îÄ‚îÄ Cargo.toml           # Workspace config
```

## Key Files

### Frontend
- `lib.rs` - Application state (`AppState`) and page routing
- `pages/login.rs` - 3-step authentication flow
- `pages/dashboard.rs` - Report generation UI
- `i18n.rs` - Internationalization (ES/EN/PT)
- `api.rs` - HTTP client for backend communication

### Backend
- `routes/auth.rs` - Login, 2FA, session management
- `routes/report.rs` - Report generation endpoint
- `middleware/security.rs` - Security headers, CORS

### Core
- `api/mod.rs` - Axur API client
- `report/html.rs` - HTML report generation

## Adding a New Feature

1. **Plan**: Create an implementation plan artifact
2. **Implement**: 
   - Add types to `axur-core` if shared
   - Add endpoints to `axur-backend`
   - Add UI to `axur-frontend`
3. **Test**: Run `cargo test --workspace`
4. **Audit**: Run `cargo audit`
5. **Document**: Update wiki pages

## Mock Data &amp; Visual Testing

The platform includes a **Mock Report Mode** to facilitate visual testing of report templates without needing real data or a specific tenant context.

### Enabling Mock Mode
1. Go to the Dashboard.
2. In the &quot;Configuration&quot; card, enable the **&quot;üß™ Mock Report Mode&quot;** toggle.
3. Click &quot;Generate Report&quot;.

### Logic
- **Frontend**: Sets `mock: true` in the API request.
- **Backend**: `ReportService` intercepts the request and returns data generated by `PocReportData::demo()`.
- **Core**: `PocReportData::demo()` creates a fully populated report structure with dummy data for all sections (Threats, Takedowns, Credential Leaks, etc.).

### Use Cases
- Designing new report templates.
- Verifying layout responsiveness.
- Testing specific data visualizations (e.g., charts, maps) with guaranteed data presence.

## Testing

```bash
# Run all tests
cargo test --workspace

# Run clippy lints
cargo clippy --all-targets -- -D warnings

# Run WASM tests (requires Chrome)
wasm-pack test --headless --chrome crates/frontend
```

## Security

Follow the `/security-audit` workflow for comprehensive security checks including:
- RustSec vulnerability scanning
- OWASP 2025 compliance
- Proper error handling verification

## Deployment

Using Leapcell (Native Rust Builder):

1. Push to main branch
2. Leapcell auto-builds and deploys

See [DEPLOY.md](../DEPLOY.md) for full instructions.</file><file path="docs/Error-Codes.md"># C√≥digos de Error - Axur Tool

Esta p√°gina documenta todos los c√≥digos de error del sistema para facilitar el diagn√≥stico de problemas.

## Formato de C√≥digos

Los c√≥digos siguen el formato `M√ìDULO-NNN`:

| Prefijo | M√≥dulo | Descripci√≥n |
|---------|--------|-------------|
| `AUTH` | Autenticaci√≥n | Errores de login, 2FA y sesi√≥n |
| `API` | API Axur | Problemas de conexi√≥n con la API de Axur |
| `RPT` | Reporte | Errores de generaci√≥n de reportes |
| `TI` | Threat Intelligence | B√∫squedas en Dark Web, viralidad, etc. |
| `NET` | Red | CORS, timeouts, DNS |
| `SYS` | Sistema | Errores internos del servidor |

---

## AUTH - Autenticaci√≥n

| C√≥digo | Nombre | Descripci√≥n | Soluci√≥n |
|--------|--------|-------------|----------|
| `AUTH-001` | Credenciales Inv√°lidas | Email o contrase√±a incorrectos | Verificar credenciales de Axur |
| `AUTH-002` | 2FA Incorrecto | C√≥digo de autenticaci√≥n de dos factores inv√°lido | Esperar nuevo c√≥digo o verificar sincronizaci√≥n de tiempo |
| `AUTH-003` | Sesi√≥n Expirada | La sesi√≥n actual ha expirado | Cerrar sesi√≥n y volver a ingresar |
| `AUTH-004` | Token Ausente | No hay token de autenticaci√≥n en la solicitud | Iniciar sesi√≥n nuevamente |

---

## API - Conexi√≥n API Axur

| C√≥digo | Nombre | Descripci√≥n | Soluci√≥n |
|--------|--------|-------------|----------|
| `API-001` | Token Expirado | El token de Axur ya no es v√°lido | Re-autenticar con Axur |
| `API-002` | Tenant No Encontrado | El tenant seleccionado no existe | Verificar ID de tenant o contactar administrador |
| `API-003` | Rate Limit | Demasiadas solicitudes en poco tiempo | Esperar 5 minutos antes de reintentar |
| `API-004` | Respuesta Inv√°lida | La API retorn√≥ datos inesperados | Reportar a soporte con detalles |
| `API-005` | Endpoint No Disponible | El endpoint de la API no responde | Verificar estado de Axur API |

---

## RPT - Generaci√≥n de Reportes

| C√≥digo | Nombre | Descripci√≥n | Soluci√≥n |
|--------|--------|-------------|----------|
| `RPT-001` | Sin Datos | No hay datos en el per√≠odo seleccionado | Ampliar el rango de fechas |
| `RPT-002` | Sin Evidencias | No hay incidentes para la secci√≥n de evidencias | Normal si no hubo incidentes |
| `RPT-003` | Error de Renderizado | Fallo al generar el HTML del reporte | Reportar a soporte |
| `RPT-004` | Configuraci√≥n Inv√°lida | Falta tenant o rango de fechas | Completar todos los campos requeridos |

---

## TI - Threat Intelligence

| C√≥digo | Nombre | Descripci√≥n | Soluci√≥n |
|--------|--------|-------------|----------|
| `TI-001` | Timeout Dark Web | La b√∫squeda en Dark Web tard√≥ demasiado | Reintentar o reducir rango de fechas |
| `TI-002` | API No Disponible | El servicio de Threat Hunting no responde | Esperar y reintentar |
| `TI-003` | Sin Credenciales | No se encontraron credenciales filtradas | Normal si no hay filtraciones |
| `TI-004` | B√∫squeda Cancelada | El usuario cancel√≥ la b√∫squeda | Reiniciar si fue accidental |

---

## NET - Red

| C√≥digo | Nombre | Descripci√≥n | Soluci√≥n |
|--------|--------|-------------|----------|
| `NET-001` | CORS Bloqueado | Pol√≠tica de CORS bloquea la solicitud | Contactar administrador para revisar configuraci√≥n |
| `NET-002` | Timeout | La conexi√≥n excedi√≥ el tiempo de espera | Verificar conexi√≥n a internet |
| `NET-003` | DNS Fallido | No se pudo resolver el dominio | Verificar configuraci√≥n de red |
| `NET-004` | Error SSL/TLS | Problema con el certificado de seguridad | Verificar fecha/hora del sistema |

---

## SYS - Sistema

| C√≥digo | Nombre | Descripci√≥n | Soluci√≥n |
|--------|--------|-------------|----------|
| `SYS-001` | Error Interno | Error inesperado del servidor | Reportar a soporte con c√≥digo y contexto |
| `SYS-002` | Configuraci√≥n | Error de configuraci√≥n del sistema | Contactar administrador |
| `SYS-003` | Recursos Agotados | Memoria o CPU insuficiente | Reiniciar servidor o contactar soporte |

---

## C√≥mo Reportar un Error

Cuando contactes a soporte, incluye:

1. **C√≥digo de error** (ej: `TI-001`)
2. **Fecha y hora** del error
3. **Tenant** que estabas usando
4. **Rango de fechas** del reporte
5. **Pasos** para reproducir el problema

Esto ayuda a identificar r√°pidamente la causa del problema.

---

## Changelog

| Fecha | Cambio |
|-------|--------|
| 2024-12-24 | Versi√≥n inicial de c√≥digos de error |</file><file path="docs/modular-architecture/DECISIONS.md"># Decision Log

Registro de decisiones arquitecturales importantes para esta iniciativa.

---

## ADR-001: No Migrar a WASI

**Fecha**: 2026-01-05  
**Estado**: Aceptada

### Contexto

Se evalu√≥ migrar a arquitectura WASI con wasmtime y wit-bindgen para sandboxing de componentes.

### Decisi√≥n

No implementar WASI ahora.

### Razones

1. **Scope de proyecto**: Web app de reportes no requiere sandboxing de c√≥digo externo
2. **Limitaciones t√©cnicas**: reqwest y tokio no funcionan nativamente en WASI
3. **Costo/Beneficio**: 6-8 semanas de trabajo sin beneficio directo
4. **Complejidad**: Agrega complejidad operacional significativa

### Alternativa Elegida

Config-driven i18n + Plugin traits (m√°s simple, suficiente para extensibilidad).

### Puerta Abierta

Si en el futuro se necesita sandbox real (plugins de terceros), la arquitectura de plugins permite migrar componentes espec√≠ficos a WASI.

---

## ADR-002: i18n con JSON Files

**Fecha**: 2026-01-05  
**Estado**: Aceptada

### Contexto

Sistema i18n actual tiene ~2000 l√≠neas de c√≥digo con traits hardcodeados.

### Decisi√≥n

Migrar a archivos JSON con loader en runtime.

### Formato Elegido

```json
{
  &quot;key&quot;: &quot;valor&quot;,
  &quot;key_with_interpolation&quot;: &quot;Hola {name}&quot;,
  &quot;_meta&quot;: {
    &quot;language&quot;: &quot;es&quot;,
    &quot;version&quot;: &quot;1.0.0&quot;
  }
}
```

### Trade-offs

| Pro | Con |
|-----|-----|
| F√°cil agregar idiomas | Errores en runtime vs compile-time |
| Non-devs pueden traducir | Necesita validaci√≥n de schema |
| Menor c√≥digo | Slightly m√°s overhead |

### Mitigaci√≥n

- Schema validation en CI
- Fallback a legacy durante transici√≥n
- Tests para verificar todas las keys existen

---

## ADR-003: Plugin Traits vs Dynamic Loading

**Fecha**: 2026-01-05  
**Estado**: Aceptada

### Contexto

Se necesita sistema extensible para agregar slides/features.

### Opciones Evaluadas

1. **Dynamic loading (dlopen)**: Plugins como .so/.dll
2. **Trait objects**: Plugins como `Box&lt;dyn SlidePlugin&gt;`
3. **Feature flags**: Cargo features para habilitar/deshabilitar

### Decisi√≥n

Trait objects con registro est√°tico.

### Razones

1. Type-safe en compile time
2. No requiere manejo de FFI
3. F√°cil de testear
4. Suficiente para el caso de uso actual

### Futuro

Si se necesita hot-reload de plugins, se puede migrar a dynamic loading o WASI componets.

---

## ADR-004: Migraci√≥n Incremental con Compatibilidad

**Fecha**: 2026-01-05  
**Estado**: Aceptada

### Contexto

Migraci√≥n debe permitir trabajo en paralelo con fixes de producci√≥n.

### Decisi√≥n

1. Trabajar en feature branch
2. Sistema legacy coexiste durante transici√≥n
3. Wrapper intenta nuevo sistema ‚Üí fallback a legacy
4. Merge por milestone completado

### Beneficios

- Producci√≥n nunca se rompe
- Rollback f√°cil si hay problemas
- Testing gradual de cada componente migrado</file><file path="docs/modular-architecture/DESIGN.md"># Technical Design: Modular Architecture

## Part 1: Config-Driven i18n

### Estado Actual (Legacy)

```rust
// core/src/i18n.rs - ~2000 l√≠neas
pub trait Dictionary: Send + Sync {
    fn welcome_message(&amp;self) -&gt; String;
    fn login_prompt_email(&amp;self) -&gt; String;
    // ... ~100 m√©todos m√°s
}

impl Dictionary for Spanish {
    fn welcome_message(&amp;self) -&gt; String {
        &quot;Bienvenido a Axur CLI&quot;.to_string()
    }
    // ... ~100 implementaciones
}
```

**Problemas:**
- Agregar idioma = copiar ~600 l√≠neas de c√≥digo Rust
- Cambiar texto requiere recompilaci√≥n
- No-developers no pueden contribuir traducciones

### Estado Objetivo

```
translations/
‚îú‚îÄ‚îÄ en.json
‚îú‚îÄ‚îÄ es.json
‚îú‚îÄ‚îÄ pt-br.json
‚îî‚îÄ‚îÄ schema.json
```

```json
// translations/es.json
{
  &quot;welcome_message&quot;: &quot;Bienvenido a Axur CLI&quot;,
  &quot;login_prompt_email&quot;: &quot;Correo electr√≥nico&quot;,
  &quot;metrics_title&quot;: &quot;M√©tricas Generales&quot;,
  &quot;threats_desc&quot;: &quot;Se detectaron &lt;strong&gt;{total}&lt;/strong&gt; amenazas.&quot;,
  &quot;_meta&quot;: {
    &quot;language&quot;: &quot;es&quot;,
    &quot;name&quot;: &quot;Espa√±ol&quot;,
    &quot;version&quot;: &quot;1.0.0&quot;
  }
}
```

### Nuevo M√≥dulo i18n

```rust
// core/src/i18n/mod.rs
use std::collections::HashMap;
use serde::Deserialize;

#[derive(Deserialize)]
pub struct Translations {
    #[serde(flatten)]
    data: HashMap&lt;String, serde_json::Value&gt;,
}

impl Translations {
    pub fn load(lang: &amp;str) -&gt; Result&lt;Self, TranslationError&gt; {
        let json = match lang {
            &quot;en&quot; =&gt; include_str!(&quot;../../translations/en.json&quot;),
            &quot;es&quot; =&gt; include_str!(&quot;../../translations/es.json&quot;),
            &quot;pt-br&quot; =&gt; include_str!(&quot;../../translations/pt-br.json&quot;),
            _ =&gt; return Err(TranslationError::UnknownLanguage(lang.into())),
        };
        serde_json::from_str(json).map_err(TranslationError::ParseError)
    }
    
    pub fn get(&amp;self, key: &amp;str) -&gt; String {
        self.data.get(key)
            .and_then(|v| v.as_str())
            .map(|s| s.to_string())
            .unwrap_or_else(|| format!(&quot;[MISSING: {}]&quot;, key))
    }
    
    pub fn format(&amp;self, key: &amp;str, args: &amp;[(&amp;str, &amp;str)]) -&gt; String {
        let mut result = self.get(key);
        for (k, v) in args {
            result = result.replace(&amp;format!(&quot;{{{}}}&quot;, k), v);
        }
        result
    }
}

#[derive(Debug, thiserror::Error)]
pub enum TranslationError {
    #[error(&quot;Unknown language: {0}&quot;)]
    UnknownLanguage(String),
    #[error(&quot;Failed to parse translations: {0}&quot;)]
    ParseError(#[from] serde_json::Error),
}
```

### Compatibilidad (Transici√≥n)

Durante la migraci√≥n, el sistema legacy coexiste:

```rust
// Wrapper que intenta nuevo sistema, fallback a legacy
pub fn get_text(key: &amp;str, lang: Language) -&gt; String {
    // Nuevo sistema
    if let Ok(trans) = Translations::load(&amp;lang.to_code()) {
        let value = trans.get(key);
        if !value.starts_with(&quot;[MISSING:&quot;) {
            return value;
        }
    }
    // Fallback a legacy
    get_dictionary(lang).get_by_key(key)
}
```

---

## Part 2: Plugin System

### Traits Principales

```rust
// core/src/plugins/traits.rs

/// Plugin que genera slides HTML
pub trait SlidePlugin: Send + Sync {
    /// Identificador √∫nico (e.g., &quot;builtin.metrics&quot;)
    fn id(&amp;self) -&gt; &amp;&apos;static str;
    
    /// Nombre legible
    fn name(&amp;self) -&gt; &amp;&apos;static str;
    
    /// Genera slides basadas en datos del reporte
    fn generate_slides(&amp;self, ctx: &amp;PluginContext) -&gt; Vec&lt;SlideOutput&gt;;
    
    /// Orden de ejecuci√≥n (mayor = primero)
    fn priority(&amp;self) -&gt; i32 { 0 }
    
    /// Si el plugin est√° habilitado para este reporte
    fn is_enabled(&amp;self, _ctx: &amp;PluginContext) -&gt; bool { true }
}

/// Plugin que transforma datos antes de generar slides
pub trait DataPlugin: Send + Sync {
    fn id(&amp;self) -&gt; &amp;&apos;static str;
    fn transform(&amp;self, data: &amp;mut ReportData);
}

/// Contexto disponible para plugins
pub struct PluginContext&lt;&apos;a&gt; {
    pub data: &amp;&apos;a ReportData,
    pub translations: &amp;&apos;a Translations,
    pub config: &amp;&apos;a ReportConfig,
    pub tenant_name: &amp;&apos;a str,
}

/// Output de un slide plugin
pub struct SlideOutput {
    pub id: String,
    pub html: String,
}
```

### Registry

```rust
// core/src/plugins/registry.rs

pub struct PluginRegistry {
    slide_plugins: Vec&lt;Box&lt;dyn SlidePlugin&gt;&gt;,
    data_plugins: Vec&lt;Box&lt;dyn DataPlugin&gt;&gt;,
}

impl PluginRegistry {
    pub fn new() -&gt; Self {
        Self::default()
    }
    
    pub fn with_builtins() -&gt; Self {
        let mut registry = Self::new();
        // Registrar plugins builtin
        registry.register_slide(Box::new(CoverSlidePlugin));
        registry.register_slide(Box::new(MetricsSlidePlugin));
        registry.register_slide(Box::new(ThreatsChartPlugin));
        // ... m√°s plugins
        registry
    }
    
    pub fn register_slide(&amp;mut self, plugin: Box&lt;dyn SlidePlugin&gt;) {
        self.slide_plugins.push(plugin);
        self.slide_plugins.sort_by_key(|p| -p.priority());
    }
    
    pub fn generate_report(&amp;self, ctx: &amp;PluginContext) -&gt; String {
        let slides: Vec&lt;String&gt; = self.slide_plugins.iter()
            .filter(|p| p.is_enabled(ctx))
            .flat_map(|p| p.generate_slides(ctx))
            .map(|s| s.html)
            .collect();
        
        slides.join(&quot;\n&quot;)
    }
}
```

### Ejemplo de Plugin Builtin

```rust
// core/src/plugins/builtin/metrics.rs

pub struct MetricsSlidePlugin;

impl SlidePlugin for MetricsSlidePlugin {
    fn id(&amp;self) -&gt; &amp;&apos;static str { &quot;builtin.metrics&quot; }
    fn name(&amp;self) -&gt; &amp;&apos;static str { &quot;General Metrics&quot; }
    fn priority(&amp;self) -&gt; i32 { 90 }
    
    fn generate_slides(&amp;self, ctx: &amp;PluginContext) -&gt; Vec&lt;SlideOutput&gt; {
        let t = &amp;ctx.translations;
        let d = &amp;ctx.data;
        
        vec![SlideOutput {
            id: &quot;metrics&quot;.into(),
            html: format!(r#&quot;
                &lt;section class=&quot;slide&quot; id=&quot;metrics&quot;&gt;
                    &lt;h2&gt;{title}&lt;/h2&gt;
                    &lt;div class=&quot;metrics-grid&quot;&gt;
                        &lt;div class=&quot;metric&quot;&gt;
                            &lt;span class=&quot;value&quot;&gt;{total}&lt;/span&gt;
                            &lt;span class=&quot;label&quot;&gt;{label}&lt;/span&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/section&gt;
            &quot;#,
                title = t.get(&quot;metrics_title&quot;),
                total = d.total_tickets,
                label = t.get(&quot;metrics_total_tickets&quot;),
            ),
        }]
    }
}
```

---

## Estructura de Directorios Final

```
crates/core/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ i18n/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mod.rs          # Nuevo loader
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ legacy.rs       # Compat layer (temporal)
‚îÇ   ‚îú‚îÄ‚îÄ plugins/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mod.rs          # Exports
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ traits.rs       # SlidePlugin, DataPlugin
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ registry.rs     # PluginRegistry
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ builtin/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ mod.rs
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ cover.rs
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ metrics.rs
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ threats.rs
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ translations/
‚îÇ   ‚îú‚îÄ‚îÄ en.json
‚îÇ   ‚îú‚îÄ‚îÄ es.json
‚îÇ   ‚îî‚îÄ‚îÄ pt-br.json
‚îî‚îÄ‚îÄ Cargo.toml
```

---

## Testing Strategy

```rust
#[cfg(test)]
mod tests {
    use super::*;
    
    #[test]
    fn test_load_translations() {
        let trans = Translations::load(&quot;en&quot;).unwrap();
        assert!(!trans.get(&quot;welcome_message&quot;).starts_with(&quot;[MISSING&quot;));
    }
    
    #[test]
    fn test_format_interpolation() {
        let trans = Translations::load(&quot;en&quot;).unwrap();
        let result = trans.format(&quot;threats_desc&quot;, &amp;[(&quot;total&quot;, &quot;42&quot;)]);
        assert!(result.contains(&quot;42&quot;));
    }
    
    #[test]
    fn test_plugin_registry() {
        let registry = PluginRegistry::with_builtins();
        assert!(registry.slide_plugins.len() &gt; 0);
    }
}
```</file><file path="docs/modular-architecture/HANDOFF.md"># Handoff Document

Instrucciones para continuar este trabajo desde cualquier punto.

---

## Estado Actual

**Fecha**: 2026-01-05  
**Milestone**: M1 - i18n Loader + 5 keys  
**Branch**: `main` (crear `feature/modular-architecture` al iniciar trabajo)

---

## Para Continuar el Trabajo

### 1. Leer Documentaci√≥n

```
docs/modular-architecture/
‚îú‚îÄ‚îÄ README.md       ‚Üê Overview y estado actual
‚îú‚îÄ‚îÄ DESIGN.md       ‚Üê Dise√±o t√©cnico detallado
‚îú‚îÄ‚îÄ MILESTONES.md   ‚Üê Tracking de progreso (ACTUALIZAR AQU√ç)
‚îú‚îÄ‚îÄ DECISIONS.md    ‚Üê Por qu√© tomamos ciertas decisiones
‚îî‚îÄ‚îÄ HANDOFF.md      ‚Üê Este documento
```

### 2. Verificar Estado Actual

```bash
# Ver qu√© milestone est√° en progreso
cat docs/modular-architecture/MILESTONES.md | head -20

# Ver si hay branch de trabajo
git branch -a | grep modular

# Ver √∫ltimos cambios relacionados
git log --oneline --all | head -20
```

### 3. Crear/Cambiar a Branch de Trabajo

```bash
git checkout -b feature/modular-architecture
# o si ya existe:
git checkout feature/modular-architecture
git pull origin main  # sincronizar con main
```

### 4. Continuar Seg√∫n Milestone

Ver [MILESTONES.md](./MILESTONES.md) para el checklist del milestone actual.

---

## Archivos Clave

| Archivo | Prop√≥sito |
|---------|-----------|
| `crates/core/src/i18n.rs` | Sistema legacy (a migrar) |
| `crates/core/src/i18n/mod.rs` | Nuevo loader (a crear/continuar) |
| `crates/core/translations/*.json` | Archivos de traducci√≥n (a crear) |
| `crates/core/src/plugins/` | Sistema de plugins (futuro) |
| `crates/core/src/report/html.rs` | Generaci√≥n de slides (a refactorizar) |

---

## Patrones a Seguir

### Para i18n

```rust
// Nuevo sistema
let trans = Translations::load(&quot;en&quot;)?;
let text = trans.get(&quot;metrics_title&quot;);
let formatted = trans.format(&quot;threats_desc&quot;, &amp;[(&quot;total&quot;, &quot;42&quot;)]);
```

### Para Plugins

```rust
// Registrar plugin
registry.register_slide(Box::new(MyCustomPlugin));

// Implementar plugin
impl SlidePlugin for MyCustomPlugin {
    fn id(&amp;self) -&gt; &amp;&apos;static str { &quot;custom.my-plugin&quot; }
    fn generate_slides(&amp;self, ctx: &amp;PluginContext) -&gt; Vec&lt;SlideOutput&gt; {
        // ...
    }
}
```

---

## Comandos √ötiles

```bash
# Build
cargo build -p axur-core

# Test espec√≠fico
cargo test -p axur-core i18n

# Verificar que no rompimos nada
cargo test --all

# Frontend (para probar reportes)
cd crates/frontend &amp;&amp; trunk serve
```

---

## Preguntas Frecuentes

### ¬øPuedo hacer fixes de producci√≥n mientras trabajo en esto?

S√≠. Ver secci√≥n &quot;Branching Strategy&quot; en DECISIONS.md (ADR-004).

```bash
git stash
git checkout main
# ... hacer fix ...
git commit &amp;&amp; git push
git checkout feature/modular-architecture
git cherry-pick &lt;commit&gt;
git stash pop
```

### ¬øC√≥mo s√© si un milestone est√° completo?

Ver &quot;Definici√≥n de Completado&quot; en cada milestone en MILESTONES.md.

### ¬øDebo actualizar esta documentaci√≥n?

**S√≠.** Despu√©s de cada sesi√≥n de trabajo:
1. Actualizar estado en `README.md`
2. Marcar items completados en `MILESTONES.md`
3. Agregar decisiones importantes a `DECISIONS.md`
4. Actualizar `HANDOFF.md` si hay info nueva relevante

---

## Contacto/Contexto

Esta iniciativa fue dise√±ada para:
- Permitir agregar idiomas sin c√≥digo Rust
- Permitir agregar features como plugins sin modificar core
- Mantener compatibilidad con producci√≥n durante migraci√≥n

El objetivo final es que **cualquier desarrollador** (incluso no-Rust) pueda:
- Agregar un nuevo idioma copiando un JSON
- Agregar una slide nueva implementando un trait simple</file><file path="docs/modular-architecture/MILESTONES.md"># Milestones Tracking

## Overview

| ID | Milestone | Estado | Fecha Inicio | Fecha Fin |
|----|-----------|--------|--------------|-----------|
| M1 | i18n Loader + 5 keys | ‚úÖ Completado | 2026-01-05 | 2026-01-05 |
| M2 | Migrar resto keys EN | ‚úÖ Completado | 2026-01-05 | 2026-01-05 |
| M3 | ES + PT-BR JSONs | ‚úÖ Completado | 2026-01-05 | 2026-01-05 |
| M4 | Plugin traits | ‚úÖ Completado | 2026-01-05 | 2026-01-05 |
| M5 | 1 slide como plugin | ‚úÖ Completado | 2026-01-05 | 2026-01-05 |
| M6 | Resto de slides | ‚úÖ Completado (14/14) | 2026-01-05 | 2026-01-05 |

---

## M1: i18n Loader + 5 Keys Migradas

**Objetivo**: Crear la infraestructura base del nuevo sistema i18n y probar con 5 keys.

**Estado**: ‚úÖ Completado (2026-01-05)

### Checklist

- [x] Crear directorio `crates/core/translations/`
- [x] Crear `translations/en.json` con 5 keys iniciales
- [x] Crear `crates/core/src/i18n/mod.rs` con nuevo loader  
- [x] Crear wrapper de compatibilidad para coexistencia
- [x] Probar que keys migradas funcionan
- [x] Verificar fallback a legacy para keys no migradas

### Keys Migradas en M1

```
welcome_message
login_prompt_email
footer_text
metrics_title
metrics_total_tickets
```

### Resultados

- Build: ‚úÖ Exitoso
- Tests: ‚úÖ 5/5 pasaron
- Legacy compatibility: ‚úÖ Funciona

---

## M2: Migrar Resto de Keys EN

**Objetivo**: Completar migraci√≥n de todas las keys al JSON de ingl√©s.

### Checklist

- [ ] Identificar todas las keys del trait `Dictionary` (~100)
- [ ] Agregar al `translations/en.json`
- [ ] Actualizar llamadas en c√≥digo para usar nuevo sistema
- [ ] Eliminar valores hardcoded del trait English

### Definici√≥n de Completado

- [ ] `impl Dictionary for English` puede ser eliminado
- [ ] Todas las keys funcionan desde JSON
- [ ] No hay `[MISSING: xxx]` en reportes generados

---

## M3: ES + PT-BR JSONs

**Objetivo**: Crear archivos JSON para espa√±ol y portugu√©s.

### Checklist

- [ ] Crear `translations/es.json` basado en impl Spanish actual
- [ ] Crear `translations/pt-br.json` basado en impl Portuguese actual
- [ ] Verificar interpolaci√≥n funciona en todos los idiomas
- [ ] Eliminar `impl Dictionary for Spanish/Portuguese`

### Definici√≥n de Completado

- [ ] Reportes generan correctamente en 3 idiomas
- [ ] C√≥digo legacy de idiomas eliminado
- [ ] Archivo i18n.rs reducido significativamente

---

## M4: Plugin Traits

**Objetivo**: Implementar sistema de plugins sin migrar slides a√∫n.

### Checklist

- [ ] Crear `crates/core/src/plugins/mod.rs`
- [ ] Crear `traits.rs` con `SlidePlugin`, `DataPlugin`
- [ ] Crear `registry.rs` con `PluginRegistry`
- [ ] Crear directorio `builtin/` vac√≠o
- [ ] Tests unitarios para registry

### Definici√≥n de Completado

- [ ] Traits compilando y documentados
- [ ] Registry puede registrar y listar plugins
- [ ] Tests pasan

---

## M5: Primera Slide como Plugin

**Objetivo**: Migrar una slide sencilla para validar el patr√≥n.

### Slide Candidata: Metrics

La slide de m√©tricas es buena candidata porque:
- Estructura simple
- Datos claros (total_tickets, threats_detected, time_saved)
- No tiene l√≥gica compleja

### Checklist

- [ ] Crear `builtin/metrics.rs`
- [ ] Implementar `SlidePlugin` para MetricsSlidePlugin
- [ ] Integrar en report generation
- [ ] Verificar output HTML id√©ntico al anterior

### Definici√≥n de Completado

- [ ] Slide de m√©tricas generada por plugin
- [ ] Output HTML visualmente id√©ntico
- [ ] C√≥digo legacy de m√©tricas comentado/removido

---

## M6: Resto de Slides + Cleanup

**Objetivo**: Migrar slides restantes y eliminar c√≥digo legacy.

### Slides a Migrar

1. CoverSlidePlugin
2. IntroSlidePlugin
3. ThreatChartPlugin
4. StealerAnalysisPlugin
5. TakedownsPlugin
6. ROIPlugin
7. ClosingPlugin
8. ... (resto seg√∫n html.rs)

### Checklist

- [ ] Migrar cada slide a su plugin
- [ ] Eliminar generaci√≥n legacy de html.rs
- [ ] Actualizar imports y exports
- [ ] Documentation final

### Definici√≥n de Completado

- [ ] Todas las slides son plugins
- [ ] html.rs usa solo PluginRegistry
- [ ] No hay c√≥digo legacy duplicado
- [ ] Documentaci√≥n actualizada</file><file path="docs/modular-architecture/README.md"># Modular Architecture Initiative

&gt; **Estado**: üü° En Progreso  
&gt; **√öltima Actualizaci√≥n**: 2026-01-05  
&gt; **Milestone Actual**: M1 - i18n Loader + 5 keys

## Objetivo

Refactorizar la arquitectura de axur-web para soportar extensibilidad sin modificar el c√≥digo core:
- **Config-Driven i18n**: Traducciones en archivos JSON
- **Plugin System**: Slides y features como plugins registrables

## Documentos de Esta Iniciativa

| Documento | Prop√≥sito |
|-----------|-----------|
| [README.md](./README.md) | Este archivo - overview y estado |
| [DESIGN.md](./DESIGN.md) | Dise√±o t√©cnico detallado |
| [MILESTONES.md](./MILESTONES.md) | Tracking de progreso por milestone |
| [DECISIONS.md](./DECISIONS.md) | Log de decisiones arquitecturales |
| [HANDOFF.md](./HANDOFF.md) | Instrucciones para continuar el trabajo |

## Quick Status

```
M1 [‚úÖ Completado] i18n Loader + 5 keys migradas
M2 [‚úÖ Completado] Migrar resto de keys EN (~100 keys)
M3 [‚úÖ Completado] Crear ES + PT-BR JSONs (~100 keys c/u)
M4 [‚úÖ Completado] Plugin traits (SlidePlugin, DataPlugin, ExportPlugin)
M5 [‚úÖ Completado] MetricsSlidePlugin migrada
M6 [‚úÖ Completado] 14 slides migradas a plugins
```

## Contexto de Decisi√≥n

### ¬øPor qu√© no WASI?
Se evalu√≥ migraci√≥n a WASI/wasmtime pero se descart√≥ porque:
- El proyecto es una web app de reportes, no necesita sandboxing de c√≥digo externo
- reqwest/tokio no funcionan nativamente en WASI
- Overhead de 6-8 semanas sin beneficio directo

### ¬øPor qu√© esta arquitectura?
- Agregar idioma = 1 archivo JSON (vs 600 l√≠neas Rust)
- Agregar feature = 1 plugin file (vs modificar html.rs)
- Compatible con trabajo en paralelo (feature branch)
- Deja puerta abierta a WASI futuro si se necesita

## C√≥mo Continuar Este Trabajo

Ver [HANDOFF.md](./HANDOFF.md) para instrucciones completas.</file><file path="docs/onboarding/ARCHITECTURE.md"># Onboarding System Architecture

## Overview

The Axur Academy onboarding system provides an interactive learning experience for new users. It consists of four main components:

1. **Tutorial Engine** - Step-by-step guided walkthroughs
2. **Achievement System** - Gamified progress tracking
3. **Sandbox Mode** - Safe practice environment
4. **Hints System** - Passive contextual help

---

## Module Structure

```
crates/frontend/src/onboarding/
‚îú‚îÄ‚îÄ mod.rs           # Module exports and documentation
‚îú‚îÄ‚îÄ tutorial.rs      # TutorialStep trait and step registry
‚îú‚îÄ‚îÄ achievements.rs  # Achievement struct and trigger system
‚îú‚îÄ‚îÄ hints.rs         # Passive hint tooltips
‚îú‚îÄ‚îÄ sandbox.rs       # Demo template and safe mode
‚îî‚îÄ‚îÄ storage.rs       # localStorage persistence
```

---

## Adding New Tutorial Steps

1. Open `tutorial.rs`
2. Add your step to `TUTORIAL_STEPS`:

```rust
TutorialStep {
    id: &quot;my_step&quot;,
    target_selector: &quot;#my-element&quot;,
    validation: StepValidation::Click,
    tooltip_position: &quot;bottom&quot;,
}
```

3. Add i18n translations in the `title()` and `instruction()` methods:

```rust
(&quot;my_step&quot;, UiLanguage::Es) =&gt; &quot;Mi t√≠tulo&quot;,
(&quot;my_step&quot;, UiLanguage::En) =&gt; &quot;My title&quot;,
(&quot;my_step&quot;, UiLanguage::Pt) =&gt; &quot;Meu t√≠tulo&quot;,
```

---

## Adding New Achievements

1. Open `achievements.rs`
2. Add to `ALL_ACHIEVEMENTS`:

```rust
Achievement {
    id: &quot;my_achievement&quot;,
    icon: &quot;üèÜ&quot;,
    trigger: AchievementTrigger::ManualAction(&quot;my_action_id&quot;),
}
```

3. Add translations in `title()` and `description()` methods.

4. Trigger from anywhere:

```rust
use crate::onboarding::unlock_achievement;
unlock_achievement(&quot;my_achievement&quot;);
```

---

## Adding New Hints

1. Open `hints.rs`
2. Add to `HINTS`:

```rust
Hint {
    id: &quot;my_hint&quot;,
    target_selector: &quot;#my-element&quot;,
    show_after_idle_ms: 15000, // 15 seconds
    position: HintPosition::Top,
}
```

3. Add translations in the `message()` method.

---

## Storage Schema

Progress is stored in `localStorage` under key `axur_onboarding`:

```json
{
  &quot;tutorial_completed&quot;: true,
  &quot;current_step&quot;: null,
  &quot;unlocked_achievements&quot;: [&quot;tutorial&quot;, &quot;first_import&quot;],
  &quot;sandbox_dismissed&quot;: false,
  &quot;welcome_seen&quot;: true,
  &quot;shortcuts_used&quot;: 7
}
```

---

## Achievement Triggers

| Trigger Type | Description | Example |
|--------------|-------------|---------|
| `TutorialComplete` | When tutorial finishes | Automatic |
| `ManualAction(id)` | Explicit call with ID | `unlock_achievement(&quot;import_pptx&quot;)` |
| `PageVisit(path)` | When visiting a page | `/editor` |
| `Shortcut(keys)` | When using a shortcut | `Ctrl+D` |

---

## i18n Pattern

All text uses the pattern:
- Method-based localization in each struct
- Match on `(id, UiLanguage::Es|En|Pt)`
- 3 languages: Spanish (default), English, Portuguese</file><file path="docs/SECURITY_AUDIT.md">---
description: Security audit workflow using RustSec/cargo-audit and OWASP 2025 guidelines
---

# Security Audit Workflow (Rust 2025 Edition)

Run comprehensive security audits aligned with RustSec, OWASP Top 10 2025, NIST SP 800-63B Rev 4, and SSDF v1.2.

## Quick Audit (Local Dev)
// turbo
```powershell
cargo audit
cargo deny check licenses
```

## Full Security Audit Steps

### 1. Dependency Vulnerability Check (RustSec)

**Objective:** Detect known vulnerabilities in the dependency tree.

// turbo

```powershell
cargo audit --deny warnings
```

If vulnerabilities found:

* Check RustSec advisory database: https://rustsec.org/advisories/
* Update dependencies: `cargo update` or replace the crate if unmaintained.

### 2. Supply Chain Integrity (OWASP A03:2025)

**Objective:** Verify the integrity of the software supply chain beyond just vulnerabilities.

**Audit Trusted Publishers:**

```powershell
cargo vet
```

*Use cargo-vet to ensure dependencies have been audited by trusted entities (Google, Mozilla, or internal team).*

**Source &amp; License Control:**

```powershell
cargo deny check sources
```

*Ensure no dependencies are pulled from untrusted git registries or unverified crates.io mirrors.*

### 3. Production Build with SBOM (Evidence Collection)

**Objective:** Embed dependency data into the binary for runtime auditing (Compliance with NIST SSDF 1.2).

```powershell
cargo auditable build --release
```

*Uses cargo-auditable to embed the dependency tree into the compiled binary.*

### 4. Unsafe Code Audit (Memory Safety)

**Objective:** Audit blocks that bypass Rust&apos;s memory safety guarantees (NIST/NSA Focus).

```powershell
cargo geiger
```

*Rule: Any use of `unsafe` must be documented and justified. Ideally, replace with safe abstractions.*

---

## OWASP 2025 Security Checklist

### A01: Broken Access Control (Risk #1) &amp; SSRF

* [ ] **Middleware:** Ensure axum or actix-web middleware enforces authentication on all protected routes
* [ ] **IDOR Prevention:** Use typed identifiers (e.g., `struct UserId(Uuid)`) instead of raw integers
* [ ] **SSRF Check:** Validate all user-supplied URLs if the server makes outbound requests (block localhost/metadata services)

### A02: Security Misconfiguration (Risk #2)

* [ ] **Headers:** Ensure security headers (HSTS, Content-Security-Policy) are set
* [ ] **Debug Mode:** Verify debug assertions are disabled in release builds (`[profile.release] debug = false`)
* [ ] **Panic Strategy:** Set `panic = &quot;abort&quot;` in Cargo.toml for production release profiles

### A03: Software Supply Chain Failures (New Emphasis 2025)

* [ ] **Binary Auditing:** Verify production binaries contain embedded SBOMs (`cargo auditable`)
* [ ] **CI/CD Integrity:** Ensure CI pipelines use immutable tags for actions/containers
* [ ] **Dependency Pinning:** `Cargo.lock` must be committed to version control

### A07: Authentication Failures (NIST 800-63B Rev 4 Alignment)

* [ ] **Password Length:** Enforce minimum 15 characters for single-factor passwords
* [ ] **Composition Rules:** REMOVE requirements for special characters/numbers. Allow spaces (Unicode 64+ chars)
* [ ] **Blocklist:** Check new passwords against a &quot;banned list&quot; (e.g., &quot;Password123&quot;)
* [ ] **MFA:** Offer Phishing-Resistant MFA (Passkeys/FIDO2) using `webauthn-rs`. Avoid SMS/Email OTP

### A10: Mishandling of Exceptional Conditions (New 2025)

* [ ] **No Panics:** Prohibit `.unwrap()` and `.expect()` in production code
* [ ] **Fail Closed:** Ensure auth logic fails to a &quot;deny&quot; state if errors occur (e.g., DB unreachable)
* [ ] **Error Leakage:** Ensure API error responses do not leak internal stack traces

**Rust-Specific Patterns:**

```rust
// Use clippy to enforce strict error handling
#![deny(clippy::unwrap_used)]
#![deny(clippy::expect_used)]

// GOOD: Mapped errors for external consumers
result.map_err(|e| ApiError::from(e))?;

// BAD: Leaking internal DB errors / Panics
result.unwrap(); // ‚ùå
```

---

## NIST &amp; Regulatory Compliance

### NIST SP 800-218 (SSDF 1.2)

* **PO.6 (Continuous Improvement):** Document audit results over time to show trend improvement
* **PS.4 (Robust Updates):** Use `cargo-auditable` to prove exactly what is running in production

### NIST SP 800-53 Rev 5

* **SI-7 (Software Integrity):** Use cryptographic hashes (SHA-256) for all release artifacts
* **SC-8 (Transmission Confidentiality):** Enforce TLS 1.3 via `rustls` (avoid OpenSSL where possible)

---

## Remediation Workflow

When vulnerabilities are found:

1. **Identify**: Run `cargo audit` and `cargo geiger`
2. **Assess**:
* Is it a Supply Chain issue (A03)? ‚Üí Check `cargo-vet`
* Is it a Logic issue (A10)? ‚Üí Review error handling paths


3. **Fix**:
* Dependencies: `cargo update` or patch via `[patch.crates-io]`
* Code: Refactor unsafe blocks or replace `.unwrap()` with Result propagation


4. **Verify**: Re-run the audit suite
5. **Document**: Update the Digital Identity Acceptance Statement (if applicable)</file><file path="docs/slack-beta-invite-ptbr.md">üéâ *Ol√° equipe!* üéâ

Espero que estejam todos bem! Quero compartilhar com voc√™s algo bem legal que estamos desenvolvendo e convid√°-los para participar como *beta testers*! üöÄ

---

*üîß O que √© essa ferramenta?*

√â um portal web que automatiza a gera√ß√£o de relat√≥rios executivos para PoCs e an√°lises de amea√ßas. Em vez de gastar horas montando slides manualmente, a ferramenta:

‚Ä¢ Conecta direto na API da Axur
‚Ä¢ Busca todos os dados de tickets, incidentes e m√©tricas
‚Ä¢ Gera um relat√≥rio HTML profissional pronto para apresentar
‚Ä¢ Inclui gr√°ficos, timeline de incidentes e an√°lise de amea√ßas

---

*üèóÔ∏è Como funciona (vis√£o geral)*

1Ô∏è‚É£ Voc√™ faz login com suas credenciais normais da Axur
2Ô∏è‚É£ Seleciona o tenant/cliente que quer analisar
3Ô∏è‚É£ Define o per√≠odo e as op√ß√µes do relat√≥rio
4Ô∏è‚É£ Um clique e o relat√≥rio √© gerado automaticamente!

√â tudo processado no browser - seus dados n√£o passam por servidores externos.

---

*üí° Dica: O Story Tag*

Tem um campo chamado `Story Tag` que √© bem poderoso! Se voc√™ usar uma tag para agrupar tickets relacionados (por exemplo, uma campanha de phishing), a ferramenta vai correlacionar todos esses dados e criar uma narrativa visual unificada.

---

*‚ö†Ô∏è Status atual: Beta*

Ainda estamos trabalhando em:
‚Ä¢ Melhorias visuais (UI/UX)
‚Ä¢ Performance de carregamento
‚Ä¢ Unificar evid√™ncias do Threat Hunting
‚Ä¢ Suporte a m√∫ltiplos idiomas

Por isso o feedback de voc√™s √© *super* valioso! üôè

---

*üì£ Como dar feedback*

Tem duas formas:

1Ô∏è‚É£ *Direto comigo* - pode me mandar mensagem aqui no Slack!

2Ô∏è‚É£ *No pr√≥prio portal* - tem um √≠cone flutuante no canto inferior direito üí¨
   ‚Üí Clica nele, escreve o feedback
   ‚Üí Uma captura de tela √© anexada automaticamente
   ‚Üí Enviado direto para o nosso backlog!

---

*üîó Acesso*

Link: &lt;https://axtool.pages.dev|axtool.pages.dev&gt;

Use suas credenciais normais da Axur (email + senha + 2FA)

---

Qualquer d√∫vida, estou por aqui! 
Obrigado por ajudar a construir essa ferramenta juntos! üí™

Abs! üáßüá∑</file><file path="docs/ZERO_COST_POLICY.md"># ZERO COST &amp; SECURITY POLICY (STRICT)

**Objetivo:** Mantener el costo operativo del proyecto en **$0.00 (Zero Tier)** indefinidamente y proteger las credenciales.
**Violaci√≥n de esta pol√≠tica:** PROHIBIDA sin autorizaci√≥n expl√≠cita y escrita del propeitario.

---

## 1. Reglas de Infraestructura (Google Cloud)
Para mantener el **Always Free Tier**, toda configuraci√≥n DEBE cumplir:

### A. Cloud Run (Backend)
- **Regi√≥n:** OBLIGATORIO `us-central1` (Iowa), `us-east1`, o `us-west1`.
  - *Prohibido:* `southamerica-east1` (Brasil) u otras regiones Tier 2.
- **Instancias:**
  - `min-instances`: 0 (Permitir &quot;Scaling to Zero&quot;).
  - `max-instances`: 1 (Evita escalado costoso por tr√°fico inesperado).
- **Recursos:**
  - CPU: 1 vCPU.
  - Memoria: 512 MiB (Suficiente para Rust).

### B. Artifact Registry (Docker Images)
- **L√≠mite Estricto:** M√°ximo 500 MB de almacenamiento promedio mensual.
- **Pol√≠tica de Limpieza (Lifecycle Policy):**
  - OBLIGATORIO configurar borrado autom√°tico.
  - Mantener m√°ximo las √∫ltimas **3 im√°genes**.
  - Script de deploy debe incluir paso de limpieza (`gcloud artifacts docker images delete ...`).

### C. Base de Datos
- **Prohibido:** Usar Cloud SQL (PostgreSQL/MySQL) de Google (Costo &gt; $15/mes).
- **Permitido:** Bases de datos externas gratuitas (Leapcell, Supabase, Neon) conectadas v√≠a URL.

### D. Seguridad de Presupuesto
- OBLIGATORIO tener activa una **Budget Alert** en GCP.
- Umbral: R$ 5.00 (o $1.00 USD).
- Notificar al 50%, 90% y 100%.

---

## 2. Reglas de Seguridad (Repositorio P√∫blico)
El c√≥digo vive en GitHub p√∫blico. **NUNCA** subir:

1.  **Credenciales GCP:** Archivos `.json` de Service Accounts (ej: `gcp_key.json`, `adc.json`).
2.  **Tokens:** `AXUR_API_TOKEN` u otros secretos.
3.  **Connection Strings:** `DATABASE_URL` con contrase√±as reales.
4.  **Archivos de Config Local:** `.env`, carpetas `.gemini`, logs de debug.
5.  **IPs o Dominios Privados:** No hardcodear IPs de servidores de staging.

**Mecanismo de Protecci√≥n:**
- Usar **GitHub Secrets** para todo lo sensible.
- Revisar `.gitignore` antes de cada commit masivo.</file></files><git_diffs><git_diff_work_tree>diff --git a/.agent/memory/DASHBOARD.md b/.agent/memory/DASHBOARD.md
index 3d263f8..54eb474 100644
--- a/.agent/memory/DASHBOARD.md
+++ b/.agent/memory/DASHBOARD.md
@@ -9,9 +9,18 @@
 | Deps      | ‚úÖ Updated |
 
 ## üéØ FOCUS NOW
-&gt; **Next Session: Clean up 22 frontend warnings + serde_yaml migration**
+&gt; **Session Complete - Ready for Handoff**
 
-## ‚úÖ DONE THIS SESSION (2026-02-10)
+## ‚úÖ DONE THIS SESSION (2026-02-12)
+- [x] **New Feature**: Mock Report Mode (Core/Backend/Frontend)
+- [x] Fixed &quot;Geospatial&quot; slide (missing map + text)
+- [x] Fixed slide footer overlap (duplicated logos)
+- [x] Manual Verification of Services (Backend + Frontend)
+- [x] Cleaned up 22 frontend warnings (clippy fixes)
+- [x] Verified `serde_yaml` usage (none found, migration skipped)
+- [x] Ran production smoke tests (4/4 passed)
+
+## üìú HISTORY (2026-02-11)
 - [x] Migrated context engine from Code2Prompt ‚Üí Repomix
 - [x] Configured Repomix MCP (WSL, XML, Tree-sitter compression)
 - [x] Generated Agent Skills (backend-reference, frontend-reference, core-reference)
@@ -29,13 +38,12 @@
 
 
 ## üìã BACKLOG (Next Session)
-- [ ] Clean up pre-existing frontend warnings (22 warnings)
-- [ ] Consider `serde_yaml` ‚Üí `serde_yml` migration
-- [ ] Production smoke tests (qa_browser_smoke)
+- [ ] Monitor production logs
+- [ ] Further UI polish
 
 ## üß† CONTEXT
-Last updated: 2026-02-10 01:57 (Session Handoff)
-Commits pushed: `0171c9f`, `70f589e`, `52d699d`, `f06b70b`
+Last updated: 2026-02-12 18:13 (Session Handoff)
+Commits pushed: (Pending local changes)
 
 ## üõë HANDOFF
 Run the handoff workflow:
diff --git a/crates/backend/src/services/report_service.rs b/crates/backend/src/services/report_service.rs
index 6423883..4cbbebe 100644
--- a/crates/backend/src/services/report_service.rs
+++ b/crates/backend/src/services/report_service.rs
@@ -37,6 +37,8 @@ pub struct GenerateReportRequest {
     pub theme: Option&lt;String&gt;,
     #[serde(default)]
     pub disabled_plugins: Option&lt;Vec&lt;String&gt;&gt;,
+    #[serde(default)]
+    pub mock: bool,
 }
 
 fn default_language() -&gt; String {
@@ -67,36 +69,42 @@ impl ReportService {
         let _start_time = Instant::now();
 
         // 1. Fetch Data
-        let report_data = match fetch_full_report(
-            token,
-            &amp;payload.tenant_id,
-            &amp;payload.from_date,
-            &amp;payload.to_date,
-            payload.story_tag.clone(),
-            payload.include_threat_intel,
-        )
-        .await
-        {
-            Ok(data) =&gt; data,
-            Err(e) =&gt; {
-                let error_code = classify_error(&amp;e.to_string());
-                tracing::error!(
-                    error_code = %error_code.code(),
-                    context = %e.to_string(),
-                    &quot;Report generation failed&quot;
-                );
+        // 1. Fetch Data
+        let report_data = if payload.mock {
+            tracing::info!(&quot;Using MOCK DATA for report generation&quot;);
+            axur_core::api::report::PocReportData::demo()
+        } else {
+            match fetch_full_report(
+                token,
+                &amp;payload.tenant_id,
+                &amp;payload.from_date,
+                &amp;payload.to_date,
+                payload.story_tag.clone(),
+                payload.include_threat_intel,
+            )
+            .await
+            {
+                Ok(data) =&gt; data,
+                Err(e) =&gt; {
+                    let error_code = classify_error(&amp;e.to_string());
+                    tracing::error!(
+                        error_code = %error_code.code(),
+                        context = %e.to_string(),
+                        &quot;Report generation failed&quot;
+                    );
 
-                // üìù Log error (Assuming log_error is handled by caller or we inject logger)
-                // Ideally logging relates to HTTP layer, but Service can log domain errors.
+                    // üìù Log error (Assuming log_error is handled by caller or we inject logger)
+                    // Ideally logging relates to HTTP layer, but Service can log domain errors.
 
-                return Ok(GenerateReportResponse {
-                    success: false,
-                    html: None,
-                    company_name: None,
-                    message: e.to_string(),
-                    error_code: Some(error_code.code()),
-                    error_message: Some(get_user_friendly_message(&amp;error_code)),
-                });
+                    return Ok(GenerateReportResponse {
+                        success: false,
+                        html: None,
+                        company_name: None,
+                        message: e.to_string(),
+                        error_code: Some(error_code.code()),
+                        error_message: Some(get_user_friendly_message(&amp;error_code)),
+                    });
+                }
             }
         };
 
diff --git a/crates/core/debug_report.html b/crates/core/debug_report.html
index 4a1d76b..e1e2d5b 100644
--- a/crates/core/debug_report.html
+++ b/crates/core/debug_report.html
@@ -181,37 +181,37 @@
                                 &lt;div class=&quot;flex items-center justify-between p-3 bg-zinc-800/50 rounded lg:mb-2 border border-zinc-700/50 hover:border-zinc-600 transition-colors&quot;&gt;
                 &lt;div class=&quot;flex items-center gap-3 overflow-hidden&quot;&gt;
                     &lt;div class=&quot;w-8 h-8 rounded bg-zinc-700 flex items-center justify-center text-zinc-400 text-xs&quot;&gt;ISP&lt;/div&gt;
-                    &lt;span class=&quot;text-zinc-300 truncate text-sm&quot;&gt;Locaweb&lt;/span&gt;
+                    &lt;span class=&quot;text-zinc-300 truncate text-sm&quot;&gt;Hetzner&lt;/span&gt;
                 &lt;/div&gt;
                 &lt;span class=&quot;text-white font-bold bg-zinc-700 px-2 py-0.5 rounded text-xs&quot;&gt;1&lt;/span&gt;
             &lt;/div&gt;&lt;div class=&quot;flex items-center justify-between p-3 bg-zinc-800/50 rounded lg:mb-2 border border-zinc-700/50 hover:border-zinc-600 transition-colors&quot;&gt;
                 &lt;div class=&quot;flex items-center gap-3 overflow-hidden&quot;&gt;
                     &lt;div class=&quot;w-8 h-8 rounded bg-zinc-700 flex items-center justify-center text-zinc-400 text-xs&quot;&gt;ISP&lt;/div&gt;
-                    &lt;span class=&quot;text-zinc-300 truncate text-sm&quot;&gt;Hetzner&lt;/span&gt;
+                    &lt;span class=&quot;text-zinc-300 truncate text-sm&quot;&gt;Yandex&lt;/span&gt;
                 &lt;/div&gt;
                 &lt;span class=&quot;text-white font-bold bg-zinc-700 px-2 py-0.5 rounded text-xs&quot;&gt;1&lt;/span&gt;
             &lt;/div&gt;&lt;div class=&quot;flex items-center justify-between p-3 bg-zinc-800/50 rounded lg:mb-2 border border-zinc-700/50 hover:border-zinc-600 transition-colors&quot;&gt;
                 &lt;div class=&quot;flex items-center gap-3 overflow-hidden&quot;&gt;
                     &lt;div class=&quot;w-8 h-8 rounded bg-zinc-700 flex items-center justify-center text-zinc-400 text-xs&quot;&gt;ISP&lt;/div&gt;
-                    &lt;span class=&quot;text-zinc-300 truncate text-sm&quot;&gt;Yandex&lt;/span&gt;
+                    &lt;span class=&quot;text-zinc-300 truncate text-sm&quot;&gt;Alibaba&lt;/span&gt;
                 &lt;/div&gt;
                 &lt;span class=&quot;text-white font-bold bg-zinc-700 px-2 py-0.5 rounded text-xs&quot;&gt;1&lt;/span&gt;
             &lt;/div&gt;&lt;div class=&quot;flex items-center justify-between p-3 bg-zinc-800/50 rounded lg:mb-2 border border-zinc-700/50 hover:border-zinc-600 transition-colors&quot;&gt;
                 &lt;div class=&quot;flex items-center gap-3 overflow-hidden&quot;&gt;
                     &lt;div class=&quot;w-8 h-8 rounded bg-zinc-700 flex items-center justify-center text-zinc-400 text-xs&quot;&gt;ISP&lt;/div&gt;
-                    &lt;span class=&quot;text-zinc-300 truncate text-sm&quot;&gt;Cloudflare&lt;/span&gt;
+                    &lt;span class=&quot;text-zinc-300 truncate text-sm&quot;&gt;Google&lt;/span&gt;
                 &lt;/div&gt;
                 &lt;span class=&quot;text-white font-bold bg-zinc-700 px-2 py-0.5 rounded text-xs&quot;&gt;1&lt;/span&gt;
             &lt;/div&gt;&lt;div class=&quot;flex items-center justify-between p-3 bg-zinc-800/50 rounded lg:mb-2 border border-zinc-700/50 hover:border-zinc-600 transition-colors&quot;&gt;
                 &lt;div class=&quot;flex items-center gap-3 overflow-hidden&quot;&gt;
                     &lt;div class=&quot;w-8 h-8 rounded bg-zinc-700 flex items-center justify-center text-zinc-400 text-xs&quot;&gt;ISP&lt;/div&gt;
-                    &lt;span class=&quot;text-zinc-300 truncate text-sm&quot;&gt;Google&lt;/span&gt;
+                    &lt;span class=&quot;text-zinc-300 truncate text-sm&quot;&gt;UOL&lt;/span&gt;
                 &lt;/div&gt;
                 &lt;span class=&quot;text-white font-bold bg-zinc-700 px-2 py-0.5 rounded text-xs&quot;&gt;1&lt;/span&gt;
             &lt;/div&gt;&lt;div class=&quot;flex items-center justify-between p-3 bg-zinc-800/50 rounded lg:mb-2 border border-zinc-700/50 hover:border-zinc-600 transition-colors&quot;&gt;
                 &lt;div class=&quot;flex items-center gap-3 overflow-hidden&quot;&gt;
                     &lt;div class=&quot;w-8 h-8 rounded bg-zinc-700 flex items-center justify-center text-zinc-400 text-xs&quot;&gt;ISP&lt;/div&gt;
-                    &lt;span class=&quot;text-zinc-300 truncate text-sm&quot;&gt;Alibaba&lt;/span&gt;
+                    &lt;span class=&quot;text-zinc-300 truncate text-sm&quot;&gt;Locaweb&lt;/span&gt;
                 &lt;/div&gt;
                 &lt;span class=&quot;text-white font-bold bg-zinc-700 px-2 py-0.5 rounded text-xs&quot;&gt;1&lt;/span&gt;
             &lt;/div&gt;
@@ -232,7 +232,7 @@
                     new Chart(ctx, {
                         type: &apos;bar&apos;,
                         data: {
-                            labels: [&quot;üá∫üá∏ USA&quot;,&quot;üá∑üá∫ Russia&quot;,&quot;üáßüá∑ Brazil&quot;,&quot;üáßüá∑ Brasil&quot;,&quot;üá©üá™ Germany&quot;,&quot;üá®üá≥ China&quot;],
+                            labels: [&quot;üá∫üá∏ USA&quot;,&quot;üá©üá™ Germany&quot;,&quot;üá∑üá∫ Russia&quot;,&quot;üá®üá≥ China&quot;,&quot;üáßüá∑ Brasil&quot;,&quot;üáßüá∑ Brazil&quot;],
                             datasets: [{
                                 label: &apos;Origem&apos;,
                                 data: [3,1,1,1,1,1],
@@ -685,7 +685,7 @@
     &quot;code_leak_box_prod&quot;: &quot;Production Secrets&quot;,
     &quot;code_leak_action&quot;: &quot;Immediate Action: Rotate Production keys and API Keys immediately. Implement secret scanning in CI/CD pipeline.&quot;,
     &quot;incidents_title&quot;: &quot;Incidents by Type&quot;,
-    &quot;incidents_desc&quot;: &quot;A total of &lt;strong&gt;{total}&lt;/strong&gt; detections were processed. This chart details the relationship between raw detections and confirmed incidents.&quot;,
+    &quot;incidents_desc&quot;: &quot;This analysis categorizes confirmed threats by attack vector. Identifying volumetric distribution allows prioritizing defenses against methods most used by attackers.&quot;,
     &quot;takedowns_title&quot;: &quot;Takedowns&quot;,
     &quot;takedowns_requested&quot;: &quot;takedowns requested&quot;,
     &quot;takedowns_success_rate&quot;: &quot;success rate&quot;,
@@ -708,6 +708,9 @@
     &quot;roi_intel_stealer&quot;: &quot;Malware (Stealer Logs)&quot;,
     &quot;roi_intel_plaintext&quot;: &quot;Plaintext Passwords&quot;,
     &quot;exposure_title&quot;: &quot;Sensitive Data Exposure&quot;,
+    &quot;exposure_desc&quot;: &quot;Analysis of the total external attack surface. We identify entry points that could allow unauthorized access to critical infrastructure.&quot;,
+    &quot;radar_desc&quot;: &quot;Multidimensional risk visualization. This chart allows quick identification of security pillars requiring immediate attention.&quot;,
+    &quot;heatmap_desc&quot;: &quot;Temporal distribution of attacks. Identifying peak times allows optimizing defensive resource allocation and anticipating campaigns.&quot;,
     &quot;exposure_sub_code&quot;: &quot;Source Code Leaks&quot;,
     &quot;exposure_sub_stealer&quot;: &quot;Infostealer Credentials&quot;,
     &quot;op_badge&quot;: &quot;OPERATIONAL IMPACT&quot;,
@@ -799,6 +802,8 @@
     &quot;geo_fmt_fallback&quot;: &quot;Geographic attribution reveals jurisdiction overlaps. Monitoring international infrastructure helps predict future campaigns.&quot;,
     &quot;geo_lbl_countries&quot;: &quot;Top Origin Countries&quot;,
     &quot;geo_lbl_isps&quot;: &quot;Top ISPs (Networks)&quot;,
+    &quot;geo_why_important_title&quot;: &quot;Why is this important?&quot;,
+    &quot;geo_why_important_text&quot;: &quot;The geographic origin of attacks helps identify global infrastructure used by cybercriminals. This data enables strategic geo-blocking and aids in attribution, allowing for more effective defensive measures against specific regional threats.&quot;,
     &quot;ctx_stealer_title&quot;: &quot;Understanding Infostealers&quot;,
     &quot;ctx_stealer_text&quot;: &quot;Infostealers are malware designed to harvest sensitive information from infected devices. They collect login credentials, cookies, and system details, often sold on dark web marketplaces. Detecting these logs allows us to identify compromised employee or customer accounts before they are used for unauthorized access.&quot;,
     &quot;ctx_leak_title&quot;: &quot;The Danger of Exposed Secrets&quot;,
@@ -908,7 +913,7 @@
     &quot;code_leak_box_prod&quot;: &quot;Secretos de Producci√≥n&quot;,
     &quot;code_leak_action&quot;: &quot;Acci√≥n Inmediata: Rotar las claves de &apos;Producci√≥n&apos; y las Claves de API inmediatamente. Implementar un esc√°ner de secretos en el pipeline de CI/CD.&quot;,
     &quot;incidents_title&quot;: &quot;Incidentes por Tipo&quot;,
-    &quot;incidents_desc&quot;: &quot;Se procesaron un total de &lt;strong&gt;{total}&lt;/strong&gt; detecciones. Este gr√°fico detalla la relaci√≥n entre detecciones brutas e incidentes confirmados.&quot;,
+    &quot;incidents_desc&quot;: &quot;Este an√°lisis categoriza las amenazas confirmadas por vector de ataque. Identificar la distribuci√≥n volum√©trica permite priorizar defensas contra los m√©todos m√°s utilizados por los atacantes.&quot;,
     &quot;takedowns_title&quot;: &quot;Takedowns&quot;,
     &quot;takedowns_requested&quot;: &quot;solicitudes de takedown&quot;,
     &quot;takedowns_success_rate&quot;: &quot;tasa de √©xito&quot;,
@@ -931,6 +936,9 @@
     &quot;roi_intel_stealer&quot;: &quot;Malware (Stealer Logs)&quot;,
     &quot;roi_intel_plaintext&quot;: &quot;Password Texto Plano&quot;,
     &quot;exposure_title&quot;: &quot;Exposici√≥n de Datos Sensibles&quot;,
+    &quot;exposure_desc&quot;: &quot;An√°lisis de la superficie de ataque externa total. Identificamos &lt;strong&gt;{creds}&lt;/strong&gt; credenciales expuestas y &lt;strong&gt;{secrets}&lt;/strong&gt; secretos en c√≥digo. Esta exposici√≥n aumenta dr√°sticamente la superficie para ataques de Ransomware y Account Takeover.&quot;,
+    &quot;radar_desc&quot;: &quot;Visualizaci√≥n multidimensional del riesgo. Este gr√°fico permite identificar r√°pidamente qu√© pilares de seguridad requieren atenci√≥n inmediata.&quot;,
+    &quot;heatmap_desc&quot;: &quot;Distribuci√≥n temporal de los ataques. Identificar los horarios pico permite optimizar la asignaci√≥n de recursos defensivos y anticipar campa√±as.&quot;,
     &quot;exposure_sub_code&quot;: &quot;Fugas en C√≥digo Fuente&quot;,
     &quot;exposure_sub_stealer&quot;: &quot;Credenciales (Infostealer)&quot;,
     &quot;op_badge&quot;: &quot;IMPACTO OPERACIONAL&quot;,
@@ -1022,6 +1030,8 @@
     &quot;geo_fmt_fallback&quot;: &quot;La atribuci√≥n geogr√°fica revela superposiciones de jurisdicci√≥n. Monitorear infraestructura internacional ayuda a predecir futuras campa√±as.&quot;,
     &quot;geo_lbl_countries&quot;: &quot;Principales Pa√≠ses de Origen&quot;,
     &quot;geo_lbl_isps&quot;: &quot;Top ISPs (Redes)&quot;,
+    &quot;geo_why_important_title&quot;: &quot;¬øPor qu√© es importante esto?&quot;,
+    &quot;geo_why_important_text&quot;: &quot;El origen geogr√°fico de los ataques revela la infraestructura global de los ciberdelincuentes. Este dato permite bloqueos estrat√©gicos por regi√≥n y mejora la atribuci√≥n, facilitando defensas m√°s efectivas contra amenazas localizadas.&quot;,
     &quot;ctx_stealer_title&quot;: &quot;Entendiendo los Infostealers&quot;,
     &quot;ctx_stealer_text&quot;: &quot;Los Infostealers son malware dise√±ado para recolectar informaci√≥n sensible de dispositivos infectados. Roban credenciales de inicio de sesi√≥n, cookies y detalles del sistema, que a menudo se venden en mercados de la dark web. Detectar estos registros nos permite identificar cuentas de empleados o clientes comprometidas antes de que sean utilizadas para accesos no autorizados.&quot;,
     &quot;ctx_leak_title&quot;: &quot;El Peligro de Secretos Expuestos&quot;,
@@ -1131,7 +1141,7 @@
     &quot;code_leak_box_prod&quot;: &quot;Segredos de Produ√ß√£o&quot;,
     &quot;code_leak_action&quot;: &quot;A√ß√£o Imediata: Rotacionar chaves de &apos;Produ√ß√£o&apos; e chaves de API imediatamente. Implementar scanner de segredos no pipeline CI/CD.&quot;,
     &quot;incidents_title&quot;: &quot;Incidentes por Tipo&quot;,
-    &quot;incidents_desc&quot;: &quot;Foram processadas um total de &lt;strong&gt;{total}&lt;/strong&gt; detec√ß√µes. Este gr√°fico detalha a rela√ß√£o entre detec√ß√µes brutas e incidentes confirmados.&quot;,
+    &quot;incidents_desc&quot;: &quot;Esta an√°lise categoriza as amea√ßas confirmadas por vetor de ataque. Identificar a distribui√ß√£o volum√©trica permite priorizar defesas contra os m√©todos mais utilizados pelos atacantes.&quot;,
     &quot;takedowns_title&quot;: &quot;Takedowns&quot;,
     &quot;takedowns_requested&quot;: &quot;takedowns solicitados&quot;,
     &quot;takedowns_success_rate&quot;: &quot;taxa de sucesso&quot;,
@@ -1154,6 +1164,9 @@
     &quot;roi_intel_stealer&quot;: &quot;Malware (Stealer Logs)&quot;,
     &quot;roi_intel_plaintext&quot;: &quot;Senhas em Texto Plano&quot;,
     &quot;exposure_title&quot;: &quot;Exposi√ß√£o de Dados Sens√≠veis&quot;,
+    &quot;exposure_desc&quot;: &quot;An√°lise da superf√≠cie de ataque externa total. Identificamos &lt;strong&gt;{creds}&lt;/strong&gt; credenciais vazadas e &lt;strong&gt;{secrets}&lt;/strong&gt; segredos em c√≥digo. Essa exposi√ß√£o aumenta drasticamente a superf√≠cie para ataques de Ransomware e Account Takeover.&quot;,
+    &quot;radar_desc&quot;: &quot;Visualiza√ß√£o multidimensional do risco. Este gr√°fico permite identificar rapidamente quais pilares de seguran√ßa requerem aten√ß√£o imediata.&quot;,
+    &quot;heatmap_desc&quot;: &quot;Distribui√ß√£o temporal dos ataques. Identificar os hor√°rios de pico permite otimizar a aloca√ß√£o de recursos defensivos e antecipar campanhas.&quot;,
     &quot;exposure_sub_code&quot;: &quot;Vazamentos em C√≥digo Fonte&quot;,
     &quot;exposure_sub_stealer&quot;: &quot;Credenciais (Infostealer)&quot;,
     &quot;op_badge&quot;: &quot;IMPACTO OPERACIONAL&quot;,
@@ -1245,6 +1258,8 @@
     &quot;geo_fmt_fallback&quot;: &quot;A atribui√ß√£o geogr√°fica revela sobreposi√ß√µes de jurisdi√ß√£o. Monitorar infraestrutura internacional ajuda a prever campanhas futuras.&quot;,
     &quot;geo_lbl_countries&quot;: &quot;Principais Pa√≠ses de Origem&quot;,
     &quot;geo_lbl_isps&quot;: &quot;Top ISPs (Redes)&quot;,
+    &quot;geo_why_important_title&quot;: &quot;Por que isso √© importante?&quot;,
+    &quot;geo_why_important_text&quot;: &quot;A origem geogr√°fica dos ataques revela a infraestrutura global usada por cibercriminosos. Esses dados permitem bloqueio geogr√°fico estrat√©gico e auxiliam na atribui√ß√£o, permitindo defesas mais eficazes contra amea√ßas regionais.&quot;,
     &quot;ctx_stealer_title&quot;: &quot;Entendendo os Infostealers&quot;,
     &quot;ctx_stealer_text&quot;: &quot;Infostealers s√£o malwares projetados para coletar informa√ß√µes sens√≠veis de dispositivos infectados. Eles roubam credenciais de login, cookies e detalhes do sistema, frequentemente vendidos em mercados da dark web. Detectar esses registros nos permite identificar contas de funcion√°rios ou clientes comprometidas antes que sejam usadas para acessos n√£o autorizados.&quot;,
     &quot;ctx_leak_title&quot;: &quot;O Perigo de Segredos Expostos&quot;,
diff --git a/crates/core/src/api/report.rs b/crates/core/src/api/report.rs
index a0ed80f..729c38b 100644
--- a/crates/core/src/api/report.rs
+++ b/crates/core/src/api/report.rs
@@ -360,6 +360,263 @@ pub struct PocReportData {
     pub is_dynamic_window: bool,
 }
 
+impl PocReportData {
+    pub fn demo() -&gt; Self {
+        PocReportData {
+            company_name: &quot;Acme Corp (Mock)&quot;.to_string(),
+            partner_name: Some(&quot;Partner Security Ltd&quot;.to_string()),
+            tlp_level: &quot;AMBER&quot;.to_string(),
+            start_date: &quot;2024-01-01&quot;.to_string(),
+            end_date: &quot;2024-01-31&quot;.to_string(),
+            brands_count: 3,
+            brands: vec![
+                &quot;Acme&quot;.to_string(),
+                &quot;AcmeBank&quot;.to_string(),
+                &quot;AcmePay&quot;.to_string(),
+            ],
+            executives_count: 5,
+            ips_count: 12,
+            bins_count: 4,
+            domains_count: 15,
+            threat_hunting_credits: 100,
+            threat_intelligence_assets: 50,
+            total_tickets: 245,
+            total_threats: 180,
+            total_incidents: 25,
+            validation_hours: 45.5,
+            threats_by_type: vec![
+                ThreatTypeCount {
+                    threat_type: &quot;phishing&quot;.to_string(),
+                    count: 85,
+                },
+                ThreatTypeCount {
+                    threat_type: &quot;fraudulent-brand-use&quot;.to_string(),
+                    count: 45,
+                },
+                ThreatTypeCount {
+                    threat_type: &quot;fake-social-media-profile&quot;.to_string(),
+                    count: 30,
+                },
+                ThreatTypeCount {
+                    threat_type: &quot;suspicious-domain&quot;.to_string(),
+                    count: 20,
+                },
+            ],
+            credentials_total: 512,
+            unique_hosts: 42,
+            high_risk_users: 8,
+            malware_breakdown: vec![
+                NameValuePair {
+                    name: &quot;RedLine&quot;.to_string(),
+                    value: 45,
+                },
+                NameValuePair {
+                    name: &quot;Raccoon&quot;.to_string(),
+                    value: 20,
+                },
+            ],
+            top_services: vec![
+                NameValuePair {
+                    name: &quot;Jira&quot;.to_string(),
+                    value: 30,
+                },
+                NameValuePair {
+                    name: &quot;Slack&quot;.to_string(),
+                    value: 25,
+                },
+            ],
+            secrets_total: 12,
+            unique_repos: 3,
+            production_secrets: 4,
+            platform_breakdown: vec![
+                NameValuePair {
+                    name: &quot;GitHub&quot;.to_string(),
+                    value: 10,
+                },
+                NameValuePair {
+                    name: &quot;GitLab&quot;.to_string(),
+                    value: 2,
+                },
+            ],
+            secret_types: vec![
+                NameValuePair {
+                    name: &quot;AWS Key&quot;.to_string(),
+                    value: 5,
+                },
+                NameValuePair {
+                    name: &quot;Private RSA&quot;.to_string(),
+                    value: 3,
+                },
+            ],
+            credential_leaks_summary: CredentialLeaksSummary {
+                total_credentials: 512,
+                unique_emails: 410,
+                sources: vec![
+                    NameValuePair {
+                        name: &quot;Dark Web&quot;.to_string(),
+                        value: 300,
+                    },
+                    NameValuePair {
+                        name: &quot;Botnets&quot;.to_string(),
+                        value: 212,
+                    },
+                ],
+                plaintext_passwords: 120,
+                stealer_logs_count: 45,
+                top_affected_domains: vec![NameValuePair {
+                    name: &quot;acme.com&quot;.to_string(),
+                    value: 150,
+                }],
+            },
+            incidents_by_type: vec![IncidentTypeCount {
+                incident_type: &quot;phishing&quot;.to_string(),
+                detections: 85,
+                incidents: 10,
+            }],
+            takedown_resolved: 120,
+            takedown_pending: 15,
+            takedown_aborted: 5,
+            takedown_unresolved: 10,
+            takedown_success_rate: 94.5,
+            takedown_median_time_to_notify: &quot;15 min&quot;.to_string(),
+            takedown_median_uptime: &quot;4 hours&quot;.to_string(),
+            takedowns_by_type: vec![
+                NameValuePair {
+                    name: &quot;phishing&quot;.to_string(),
+                    value: 80,
+                },
+                NameValuePair {
+                    name: &quot;fraud&quot;.to_string(),
+                    value: 40,
+                },
+            ],
+            poc_examples: vec![PocEvidence {
+                evidence_type: &quot;phishing&quot;.to_string(),
+                ticket_key: &quot;TK-1234&quot;.to_string(),
+                reference_url: &quot;http://malicious-acme.com&quot;.to_string(),
+                status: &quot;incident&quot;.to_string(),
+                ip: Some(&quot;192.168.1.1&quot;.to_string()),
+                isp: Some(&quot;Bad ISP&quot;.to_string()),
+                domain: Some(&quot;malicious-acme.com&quot;.to_string()),
+                screenshot_url: None,
+                reported_date: Some(&quot;2024-01-15&quot;.to_string()),
+                risk_score: Some(0.95),
+                brand_confidence: Some(0.99),
+                detection_minutes: Some(15),
+                has_login_form: Some(true),
+            }],
+            takedown_examples: vec![TakedownExample {
+                name: &quot;Phishing Site&quot;.to_string(),
+                ticket_type: &quot;phishing&quot;.to_string(),
+                status: &quot;resolved&quot;.to_string(),
+                request_date: Some(&quot;2024-01-10&quot;.to_string()),
+                url: &quot;http://fake-login.com&quot;.to_string(),
+            }],
+            resolved_takedowns: vec![ResolvedTakedown {
+                ticket_key: &quot;TK-5678&quot;.to_string(),
+                name: &quot;Brand Abuse&quot;.to_string(),
+                ticket_type: &quot;fraud&quot;.to_string(),
+                status: &quot;resolved&quot;.to_string(),
+                host: &quot;fake-brand.net&quot;.to_string(),
+                ip: &quot;10.0.0.1&quot;.to_string(),
+                country: &quot;US&quot;.to_string(),
+                request_date: Some(&quot;2024-01-05&quot;.to_string()),
+                resolution_date: Some(&quot;2024-01-06&quot;.to_string()),
+                url: &quot;http://fake-brand.net/login&quot;.to_string(),
+                registrar: Some(&quot;NameCheap&quot;.to_string()),
+                isp: Some(&quot;AWS&quot;.to_string()),
+                screenshot_url: None,
+            }],
+            latest_incidents: vec![IncidentExample {
+                ticket_key: &quot;TK-9012&quot;.to_string(),
+                name: &quot;Active Phishing&quot;.to_string(),
+                ticket_type: &quot;phishing&quot;.to_string(),
+                status: &quot;incident&quot;.to_string(),
+                open_date: Some(&quot;2024-01-20T10:00:00Z&quot;.to_string()),
+                incident_date: Some(&quot;2024-01-20T10:05:00Z&quot;.to_string()),
+                host: &quot;evil-site.org&quot;.to_string(),
+                ip: &quot;1.2.3.4&quot;.to_string(),
+                isp: &quot;Cloudflare&quot;.to_string(),
+                url: &quot;https://evil-site.org/auth&quot;.to_string(),
+                country: &quot;RU&quot;.to_string(),
+                registrar: Some(&quot;GoDaddy&quot;.to_string()),
+                screenshot_url: None,
+            }],
+            deep_analytics: DeepAnalyticsData {
+                top_repositories: vec![NameValuePair {
+                    name: &quot;acme-backend&quot;.to_string(),
+                    value: 5,
+                }],
+                secret_types_breakdown: vec![NameValuePair {
+                    name: &quot;API Key&quot;.to_string(),
+                    value: 8,
+                }],
+                leak_source_breakdown: vec![
+                    NameValuePair {
+                        name: &quot;Stealer Logs&quot;.to_string(),
+                        value: 60,
+                    },
+                    NameValuePair {
+                        name: &quot;Combolist&quot;.to_string(),
+                        value: 40,
+                    },
+                ],
+                top_affected_domains: vec![NameValuePair {
+                    name: &quot;acme.com&quot;.to_string(),
+                    value: 100,
+                }],
+                avg_takedown_time_hours: Some(4.5),
+                takedowns_by_platform: vec![NameValuePair {
+                    name: &quot;Facebook&quot;.to_string(),
+                    value: 15,
+                }],
+                has_code_leak_insights: true,
+                has_credential_insights: true,
+                has_takedown_insights: true,
+            },
+            roi_metrics: OperationalMetrics {
+                hours_saved_total: 150.0,
+                hours_saved_validation: 20.0,
+                hours_saved_credentials: 30.0,
+                hours_saved_takedowns: 50.0,
+                hours_saved_secrets: 50.0,
+                analysts_equivalent_monthly: 1.5,
+                person_days_saved: 18.0,
+                avg_response_minutes: 15.0,
+                median_response_time: &quot;15 min&quot;.to_string(),
+                median_threat_exposure: &quot;4 hours&quot;.to_string(),
+                takedown_success_rate: 94.5,
+                tickets_processed: 245,
+                credentials_monitored: 512,
+                secrets_detected: 12,
+                takedowns_completed: 120,
+                threats_detected: 180,
+                takedown_resolution_rate: 90.0,
+                response_speed_multiplier: 5.0,
+                has_significant_data: true,
+            },
+            story_tickets: vec![],
+            threat_intelligence: ThreatIntelligence::demo(),
+            deep_investigations: vec![],
+            credential_exposures: vec![],
+            critical_credentials: vec![],
+            risk_score: RiskScore {
+                current: 450.0,
+                history: vec![400.0, 420.0, 450.0],
+                label: &quot;Medium&quot;.to_string(),
+                color: &quot;#FFA500&quot;.to_string(),
+            },
+            comparison: Some(ComparisonData {
+                period_label: &quot;vs. Last Month&quot;.to_string(),
+                prev_tickets: 200,
+                prev_takedowns: 100,
+                prev_credentials: 400,
+            }),
+            is_dynamic_window: true,
+        }
+    }
+}
+
 /// Data for period-over-period comparison analysis
 #[derive(Debug, Serialize, Clone, Default)]
 pub struct ComparisonData {
diff --git a/crates/core/src/i18n/legacy.rs b/crates/core/src/i18n/legacy.rs
index 290aeaa..2147dda 100644
--- a/crates/core/src/i18n/legacy.rs
+++ b/crates/core/src/i18n/legacy.rs
@@ -276,6 +276,8 @@ pub trait Dictionary: Send + Sync {
     fn geo_fmt_fallback(&amp;self) -&gt; String;
     fn geo_lbl_countries(&amp;self) -&gt; String;
     fn geo_lbl_isps(&amp;self) -&gt; String;
+    fn geo_why_important_title(&amp;self) -&gt; String;
+    fn geo_why_important_text(&amp;self) -&gt; String;
 
     fn ctx_stealer_title(&amp;self) -&gt; String;
     fn ctx_stealer_text(&amp;self) -&gt; String;
@@ -868,6 +870,13 @@ impl Dictionary for English {
         &quot;Top ISPs (Networks)&quot;.to_string()
     }
 
+    fn geo_why_important_title(&amp;self) -&gt; String {
+        &quot;Why is this important?&quot;.to_string()
+    }
+    fn geo_why_important_text(&amp;self) -&gt; String {
+        &quot;The geographic origin of attacks helps identify global infrastructure used by cybercriminals. This data enables strategic geo-blocking and aids in attribution, allowing for more effective defensive measures against specific regional threats.&quot;.to_string()
+    }
+
     fn ctx_stealer_title(&amp;self) -&gt; String {
         &quot;Understanding Infostealers&quot;.to_string()
     }
@@ -1319,6 +1328,13 @@ impl Dictionary for Spanish {
         &quot;Top ISPs (Redes)&quot;.to_string()
     }
 
+    fn geo_why_important_title(&amp;self) -&gt; String {
+        &quot;¬øPor qu√© es importante esto?&quot;.to_string()
+    }
+    fn geo_why_important_text(&amp;self) -&gt; String {
+        &quot;El origen geogr√°fico de los ataques revela la infraestructura global de los ciberdelincuentes. Este dato permite bloqueos estrat√©gicos por regi√≥n y mejora la atribuci√≥n, facilitando defensas m√°s efectivas contra amenazas localizadas.&quot;.to_string()
+    }
+
     fn roi_title(&amp;self) -&gt; String {
         &quot;Impacto y ROI&quot;.to_string()
     }
@@ -2084,6 +2100,13 @@ impl Dictionary for Portuguese {
     fn geo_lbl_isps(&amp;self) -&gt; String {
         &quot;Top ISPs (Redes)&quot;.to_string()
     }
+
+    fn geo_why_important_title(&amp;self) -&gt; String {
+        &quot;Por que isso √© importante?&quot;.to_string()
+    }
+    fn geo_why_important_text(&amp;self) -&gt; String {
+        &quot;A origem geogr√°fica dos ataques revela a infraestrutura global usada por cibercriminosos. Esses dados permitem bloqueio geogr√°fico estrat√©gico e auxiliam na atribui√ß√£o, permitindo defesas mais eficazes contra amea√ßas regionais.&quot;.to_string()
+    }
 }
 
 pub fn get_dictionary(lang: Language) -&gt; Box&lt;dyn Dictionary&gt; {
diff --git a/crates/core/src/lib.rs b/crates/core/src/lib.rs
index f86fe4c..05cf3e8 100644
--- a/crates/core/src/lib.rs
+++ b/crates/core/src/lib.rs
@@ -11,4 +11,5 @@ pub mod i18n;
 pub mod plugins;
 pub mod pptx_mapper;
 pub mod report;
+
 pub mod templates;
diff --git a/crates/core/src/plugins/builtin/geospatial.rs b/crates/core/src/plugins/builtin/geospatial.rs
index ad82bc0..f12ca71 100644
--- a/crates/core/src/plugins/builtin/geospatial.rs
+++ b/crates/core/src/plugins/builtin/geospatial.rs
@@ -56,18 +56,93 @@ impl SlidePlugin for GeospatialSlidePlugin {
         let mut sorted: Vec&lt;_&gt; = countries.into_iter().collect();
         sorted.sort_by(|a, b| b.1.cmp(&amp;a.1));
 
-        let rows_html: String = sorted.iter().take(10).map(|(country, count)| {
+        let max_count = sorted.first().map(|(_, c)| *c).unwrap_or(1);
+
+        let rows_html: String = sorted.iter().take(8).map(|(country, count)| {
+            let pct = (*count as f64 / max_count as f64) * 100.0;
             format!(
-                r#&quot;&lt;div class=&quot;flex items-center justify-between p-3 bg-zinc-900 rounded mb-2&quot;&gt;&lt;span class=&quot;font-medium&quot;&gt;{}&lt;/span&gt;&lt;span class=&quot;px-3 py-1 bg-orange-600 rounded text-sm&quot;&gt;{}&lt;/span&gt;&lt;/div&gt;&quot;#,
-                country, count
+                r#&quot;&lt;div class=&quot;mb-5&quot;&gt;
+                    &lt;div class=&quot;flex justify-between items-end mb-2&quot;&gt;
+                        &lt;span class=&quot;font-bold text-lg text-zinc-200&quot;&gt;{}&lt;/span&gt;
+                        &lt;span class=&quot;text-orange-500 font-mono font-bold text-xl&quot;&gt;{}&lt;/span&gt;
+                    &lt;/div&gt;
+                    &lt;div class=&quot;h-3 bg-zinc-800/50 rounded-full overflow-hidden border border-zinc-800&quot;&gt;
+                        &lt;div class=&quot;h-full bg-gradient-to-r from-orange-600 to-orange-400 shadow-[0_0_10px_rgba(249,115,22,0.3)] transition-all duration-1000&quot; style=&quot;width: {}%&quot;&gt;&lt;/div&gt;
+                    &lt;/div&gt;
+                   &lt;/div&gt;&quot;#,
+                country, count, pct
             )
         }).collect();
 
+        // If no data, show a message
+        let visualization_html = if sorted.is_empty() {
+            format!(
+                r#&quot;&lt;div class=&quot;flex flex-col items-center justify-center h-full text-zinc-500&quot;&gt;
+                    &lt;svg class=&quot;w-16 h-16 mb-4 opacity-20&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; d=&quot;M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;
+                    &lt;p class=&quot;text-xl&quot;&gt;{}&lt;/p&gt;
+                   &lt;/div&gt;&quot;#,
+                t.get(&quot;example_no_data&quot;)
+            )
+        } else {
+            rows_html
+        };
+
         let html = format!(
-            r#&quot;&lt;div class=&quot;relative group&quot;&gt;&lt;div class=&quot;printable-slide aspect-[16/9] w-full flex flex-col p-10 md:p-14 shadow-lg mb-8 relative bg-zinc-950 text-white&quot;&gt;&lt;div class=&quot;flex-grow h-full overflow-hidden&quot;&gt;&lt;div class=&quot;h-full flex flex-col&quot;&gt;&lt;div class=&quot;mb-4&quot;&gt;&lt;span class=&quot;bg-green-600 px-4 py-1 text-sm font-semibold&quot;&gt;GEOSPATIAL&lt;/span&gt;&lt;/div&gt;&lt;h2 class=&quot;text-4xl font-bold mb-8&quot;&gt;{title}&lt;/h2&gt;&lt;div class=&quot;grid grid-cols-2 gap-8&quot;&gt;&lt;div class=&quot;flex-grow&quot;&gt;{rows}&lt;/div&gt;&lt;div class=&quot;bg-zinc-900/50 p-6 rounded-xl border border-zinc-800 flex items-center justify-center&quot;&gt;&lt;p class=&quot;text-zinc-500 text-center&quot;&gt;{map_placeholder}&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;{footer}&lt;/div&gt;&lt;/div&gt;&quot;#,
+            r#&quot;&lt;div class=&quot;relative group&quot;&gt;
+                &lt;div class=&quot;printable-slide aspect-[16/9] w-full flex flex-col shadow-lg mb-8 relative bg-[#09090b] text-white overflow-hidden&quot;&gt;
+                    &lt;!-- Background Grid --&gt;
+                    &lt;div class=&quot;absolute inset-0&quot; style=&quot;background-image: radial-gradient(circle at 1px 1px, #27272a 1px, transparent 0); background-size: 40px 40px; opacity: 0.3;&quot;&gt;&lt;/div&gt;
+                    
+                    &lt;div class=&quot;relative z-10 flex flex-col h-full p-12&quot;&gt;
+                        &lt;!-- Header --&gt;
+                        &lt;div class=&quot;flex items-center gap-4 mb-2&quot;&gt;
+                            &lt;span class=&quot;bg-orange-600/20 text-orange-500 border border-orange-600/30 px-3 py-1 text-xs font-bold tracking-wider uppercase rounded-full&quot;&gt;GEOSPATIAL&lt;/span&gt;
+                        &lt;/div&gt;
+                        &lt;h2 class=&quot;text-5xl font-black mb-10 tracking-tight text-white&quot;&gt;{title}&lt;/h2&gt;
+
+                        &lt;div class=&quot;flex gap-12 flex-grow&quot;&gt;
+                            &lt;!-- Left: Visualization (Replaces Map) --&gt;
+                            &lt;div class=&quot;w-2/3 flex flex-col&quot;&gt;
+                                &lt;div class=&quot;bg-zinc-900/40 p-8 rounded-2xl border border-zinc-800/50 flex-grow backdrop-blur-sm shadow-xl&quot;&gt;
+                                    &lt;h3 class=&quot;text-xl font-bold text-zinc-400 mb-6 flex items-center gap-2&quot;&gt;
+                                        &lt;svg class=&quot;w-5 h-5&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; d=&quot;M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;
+                                        {lbl_countries}
+                                    &lt;/h3&gt;
+                                    &lt;div class=&quot;space-y-1&quot;&gt;
+                                        {visualization}
+                                    &lt;/div&gt;
+                                &lt;/div&gt;
+                            &lt;/div&gt;
+
+                            &lt;!-- Right: Analysis &amp; Context --&gt;
+                            &lt;div class=&quot;w-1/3 flex flex-col gap-6&quot;&gt;
+                                &lt;!-- Why this is important --&gt;
+                                &lt;div class=&quot;bg-gradient-to-br from-indigo-900/20 to-indigo-950/20 p-6 rounded-2xl border border-indigo-500/20&quot;&gt;
+                                    &lt;div class=&quot;flex items-center gap-3 mb-3&quot;&gt;
+                                        &lt;div class=&quot;p-2 bg-indigo-500/10 rounded-lg&quot;&gt;
+                                            &lt;svg class=&quot;w-6 h-6 text-indigo-400&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; d=&quot;M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;
+                                        &lt;/div&gt;
+                                        &lt;h3 class=&quot;text-lg font-bold text-indigo-300&quot;&gt;{why_title}&lt;/h3&gt;
+                                    &lt;/div&gt;
+                                    &lt;p class=&quot;text-indigo-200/80 leading-relaxed text-sm&quot;&gt;
+                                        {why_text}
+                                    &lt;/p&gt;
+                                &lt;/div&gt;
+
+                                &lt;!-- Key stats or secondary info could go here --&gt;
+                            &lt;/div&gt;
+                        &lt;/div&gt;
+                    &lt;/div&gt;
+
+                    &lt;!-- Footer --&gt;
+                    {footer}
+                &lt;/div&gt;
+            &lt;/div&gt;&quot;#,
             title = t.get(&quot;geo_title&quot;),
-            rows = rows_html,
-            map_placeholder = t.get(&quot;geo_map_placeholder&quot;),
+            visualization = visualization_html,
+            lbl_countries = t.get(&quot;geo_lbl_countries&quot;),
+            why_title = t.get(&quot;geo_why_important_title&quot;),
+            why_text = t.get(&quot;geo_why_important_text&quot;),
             footer = footer_dark(14, &amp;t.get(&quot;footer_text&quot;)),
         );
 
diff --git a/crates/core/src/plugins/builtin/theme.rs b/crates/core/src/plugins/builtin/theme.rs
index 7920f78..31f228f 100644
--- a/crates/core/src/plugins/builtin/theme.rs
+++ b/crates/core/src/plugins/builtin/theme.rs
@@ -259,7 +259,7 @@ pub const BRAND_CSS: &amp;str = r#&quot;
 }
 
 .axur-logo::before {
-  content: &apos;///&apos;;
+  /* content: &apos;///&apos;; Removed to prevent duplication with explicit HTML */
   color: var(--axur-orange);
   margin-right: 0.25rem;
 }
diff --git a/crates/core/src/plugins/registry.rs b/crates/core/src/plugins/registry.rs
index 124f3b3..a2d9468 100644
--- a/crates/core/src/plugins/registry.rs
+++ b/crates/core/src/plugins/registry.rs
@@ -169,10 +169,10 @@ mod tests {
     #[test]
     fn test_registry_with_builtins() {
         let registry = PluginRegistry::with_builtins();
-        // 20 builtin slide plugins registered
-        assert_eq!(registry.slide_plugins().len(), 20);
+        // 24 builtin slide plugins registered
+        assert_eq!(registry.slide_plugins().len(), 24);
         // Verify ordering by priority (cover should be first, closing last)
         assert_eq!(registry.slide_plugins()[0].id(), &quot;builtin.cover&quot;);
-        assert_eq!(registry.slide_plugins()[19].id(), &quot;builtin.closing&quot;);
+        assert_eq!(registry.slide_plugins()[23].id(), &quot;builtin.closing&quot;);
     }
 }
diff --git a/crates/core/src/report/html.rs b/crates/core/src/report/html.rs
index 2228e8d..9ff4c64 100644
--- a/crates/core/src/report/html.rs
+++ b/crates/core/src/report/html.rs
@@ -3499,6 +3499,7 @@ mod tests {
             threat_intelligence_assets: 10,
             
             total_tickets: 1000,
+            total_incidents: 100,
             total_threats: 500,
             validation_hours: 10.0,
             
diff --git a/crates/core/translations/en.json b/crates/core/translations/en.json
index 3e2f65a..57f9065 100644
--- a/crates/core/translations/en.json
+++ b/crates/core/translations/en.json
@@ -192,6 +192,8 @@
     &quot;geo_fmt_fallback&quot;: &quot;Geographic attribution reveals jurisdiction overlaps. Monitoring international infrastructure helps predict future campaigns.&quot;,
     &quot;geo_lbl_countries&quot;: &quot;Top Origin Countries&quot;,
     &quot;geo_lbl_isps&quot;: &quot;Top ISPs (Networks)&quot;,
+    &quot;geo_why_important_title&quot;: &quot;Why is this important?&quot;,
+    &quot;geo_why_important_text&quot;: &quot;The geographic origin of attacks helps identify global infrastructure used by cybercriminals. This data enables strategic geo-blocking and aids in attribution, allowing for more effective defensive measures against specific regional threats.&quot;,
     &quot;ctx_stealer_title&quot;: &quot;Understanding Infostealers&quot;,
     &quot;ctx_stealer_text&quot;: &quot;Infostealers are malware designed to harvest sensitive information from infected devices. They collect login credentials, cookies, and system details, often sold on dark web marketplaces. Detecting these logs allows us to identify compromised employee or customer accounts before they are used for unauthorized access.&quot;,
     &quot;ctx_leak_title&quot;: &quot;The Danger of Exposed Secrets&quot;,
diff --git a/crates/core/translations/es.json b/crates/core/translations/es.json
index 42358cd..ccba4e8 100644
--- a/crates/core/translations/es.json
+++ b/crates/core/translations/es.json
@@ -192,6 +192,8 @@
     &quot;geo_fmt_fallback&quot;: &quot;La atribuci√≥n geogr√°fica revela superposiciones de jurisdicci√≥n. Monitorear infraestructura internacional ayuda a predecir futuras campa√±as.&quot;,
     &quot;geo_lbl_countries&quot;: &quot;Principales Pa√≠ses de Origen&quot;,
     &quot;geo_lbl_isps&quot;: &quot;Top ISPs (Redes)&quot;,
+    &quot;geo_why_important_title&quot;: &quot;¬øPor qu√© es importante esto?&quot;,
+    &quot;geo_why_important_text&quot;: &quot;El origen geogr√°fico de los ataques revela la infraestructura global de los ciberdelincuentes. Este dato permite bloqueos estrat√©gicos por regi√≥n y mejora la atribuci√≥n, facilitando defensas m√°s efectivas contra amenazas localizadas.&quot;,
     &quot;ctx_stealer_title&quot;: &quot;Entendiendo los Infostealers&quot;,
     &quot;ctx_stealer_text&quot;: &quot;Los Infostealers son malware dise√±ado para recolectar informaci√≥n sensible de dispositivos infectados. Roban credenciales de inicio de sesi√≥n, cookies y detalles del sistema, que a menudo se venden en mercados de la dark web. Detectar estos registros nos permite identificar cuentas de empleados o clientes comprometidas antes de que sean utilizadas para accesos no autorizados.&quot;,
     &quot;ctx_leak_title&quot;: &quot;El Peligro de Secretos Expuestos&quot;,
diff --git a/crates/core/translations/pt-br.json b/crates/core/translations/pt-br.json
index 520e1b5..2808f8d 100644
--- a/crates/core/translations/pt-br.json
+++ b/crates/core/translations/pt-br.json
@@ -192,6 +192,8 @@
     &quot;geo_fmt_fallback&quot;: &quot;A atribui√ß√£o geogr√°fica revela sobreposi√ß√µes de jurisdi√ß√£o. Monitorar infraestrutura internacional ajuda a prever campanhas futuras.&quot;,
     &quot;geo_lbl_countries&quot;: &quot;Principais Pa√≠ses de Origem&quot;,
     &quot;geo_lbl_isps&quot;: &quot;Top ISPs (Redes)&quot;,
+    &quot;geo_why_important_title&quot;: &quot;Por que isso √© importante?&quot;,
+    &quot;geo_why_important_text&quot;: &quot;A origem geogr√°fica dos ataques revela a infraestrutura global usada por cibercriminosos. Esses dados permitem bloqueio geogr√°fico estrat√©gico e auxiliam na atribui√ß√£o, permitindo defesas mais eficazes contra amea√ßas regionais.&quot;,
     &quot;ctx_stealer_title&quot;: &quot;Entendendo os Infostealers&quot;,
     &quot;ctx_stealer_text&quot;: &quot;Infostealers s√£o malwares projetados para coletar informa√ß√µes sens√≠veis de dispositivos infectados. Eles roubam credenciais de login, cookies e detalhes do sistema, frequentemente vendidos em mercados da dark web. Detectar esses registros nos permite identificar contas de funcion√°rios ou clientes comprometidas antes que sejam usadas para acessos n√£o autorizados.&quot;,
     &quot;ctx_leak_title&quot;: &quot;O Perigo de Segredos Expostos&quot;,
diff --git a/crates/frontend/src/api.rs b/crates/frontend/src/api.rs
index ab49748..d5cfc85 100644
--- a/crates/frontend/src/api.rs
+++ b/crates/frontend/src/api.rs
@@ -98,6 +98,9 @@ pub struct GenerateReportRequest {
     /// List of plugin IDs to disable
     #[serde(default)]
     pub disabled_plugins: Option&lt;Vec&lt;String&gt;&gt;,
+    /// Use mock data (development only)
+    #[serde(default)]
+    pub mock: bool,
 }
 
 #[derive(Debug, Clone, Deserialize)]
@@ -280,6 +283,7 @@ pub async fn list_tenants() -&gt; Result&lt;Vec&lt;Tenant&gt;, String&gt; {
 
 /// Generate report
 #[allow(dead_code)]
+#[allow(clippy::too_many_arguments)]
 pub async fn generate_report(
     tenant_id: &amp;str,
     from_date: &amp;str,
@@ -292,6 +296,7 @@ pub async fn generate_report(
     use_plugins: bool,
     theme: Option&lt;String&gt;,
     disabled_plugins: Option&lt;Vec&lt;String&gt;&gt;,
+    mock: bool,
 ) -&gt; Result&lt;GenerateReportResponse, String&gt; {
     let resp = Request::post(&amp;format!(&quot;{}/api/report/generate&quot;, API_BASE))
         .header(&quot;Content-Type&quot;, &quot;application/json&quot;)
@@ -308,6 +313,7 @@ pub async fn generate_report(
             use_plugins,
             theme,
             disabled_plugins,
+            mock,
         })
         .map_err(|e| e.to_string())?
         .send()
@@ -470,6 +476,7 @@ pub enum ReportStreamEvent {
 }
 
 /// Get the SSE stream URL for report generation
+#[allow(clippy::too_many_arguments)]
 pub fn get_report_stream_url(
     tenant_id: &amp;str,
     from_date: &amp;str,
@@ -479,16 +486,18 @@ pub fn get_report_stream_url(
     include_threat_intel: bool,
     template_id: Option&lt;&amp;str&gt;,
     use_plugins: bool,
+    mock: bool, // NEW
 ) -&gt; String {
     let mut url = format!(
-        &quot;{}/api/reports/generate-stream?tenant_id={}&amp;from_date={}&amp;to_date={}&amp;language={}&amp;include_threat_intel={}&amp;use_plugins={}&quot;,
+        &quot;{}/api/reports/generate-stream?tenant_id={}&amp;from_date={}&amp;to_date={}&amp;language={}&amp;include_threat_intel={}&amp;use_plugins={}&amp;mock={}&quot;,
         API_BASE,
         urlencoding_encode(tenant_id),
         urlencoding_encode(from_date),
         urlencoding_encode(to_date),
         urlencoding_encode(language),
         include_threat_intel,
-        use_plugins
+        use_plugins,
+        mock
     );
 
     if let Some(tag) = story_tag {
diff --git a/crates/frontend/src/components/loading.rs b/crates/frontend/src/components/loading.rs
index 7578b4e..210ecd7 100644
--- a/crates/frontend/src/components/loading.rs
+++ b/crates/frontend/src/components/loading.rs
@@ -47,14 +47,12 @@ pub fn ReportLoader(#[prop(optional)] include_threat_intel: bool) -&gt; impl IntoVi
     };
 
     // Rotating fun messages
-    let messages = vec![
-        &quot;Preparando tu reporte ejecutivo...&quot;,
+    let messages = [&quot;Preparando tu reporte ejecutivo...&quot;,
         &quot;Analizando datos de seguridad...&quot;,
         &quot;Procesando incidentes...&quot;,
         &quot;Generando visualizaciones...&quot;,
         &quot;Casi listo...&quot;,
-        &quot;Puliendo los detalles finales...&quot;,
-    ];
+        &quot;Puliendo los detalles finales...&quot;];
 
     // Advance step every 8 seconds (to better match actual API timing)
     // Does NOT cycle - stays on last step once reached
diff --git a/crates/frontend/src/components/preview_modal.rs b/crates/frontend/src/components/preview_modal.rs
index 47b9c1e..75e45be 100644
--- a/crates/frontend/src/components/preview_modal.rs
+++ b/crates/frontend/src/components/preview_modal.rs
@@ -4,6 +4,7 @@ use leptos::*;
 
 /// Props for the preview modal
 #[derive(Clone)]
+#[derive(Default)]
 pub struct PreviewData {
     pub signal_lake_count: u64,
     pub credential_count: u64,
@@ -14,19 +15,6 @@ pub struct PreviewData {
     pub tickets_count: usize,
 }
 
-impl Default for PreviewData {
-    fn default() -&gt; Self {
-        Self {
-            signal_lake_count: 0,
-            credential_count: 0,
-            chat_message_count: 0,
-            forum_message_count: 0,
-            total_count: 0,
-            estimated_credits: 0,
-            tickets_count: 0,
-        }
-    }
-}
 
 /// Streaming progress state
 #[derive(Clone, Default)]
diff --git a/crates/frontend/src/components/sync_overlay.rs b/crates/frontend/src/components/sync_overlay.rs
index 2d85aa9..0068498 100644
--- a/crates/frontend/src/components/sync_overlay.rs
+++ b/crates/frontend/src/components/sync_overlay.rs
@@ -40,7 +40,10 @@ pub fn GitHubSyncOverlay(
                         &lt;div class=&quot;sync-icon warning&quot;&gt;&quot;‚ö†&quot;&lt;/div&gt;
                         &lt;span class=&quot;warning-text&quot;&gt;&quot;Modo offline&quot;&lt;/span&gt;
                     }.into_view(),
-                    SyncState::Idle =&gt; view! { &lt;&gt;&lt;/&gt; }.into_view(),
+                    SyncState::Idle =&gt; {
+                        view! { &lt;&gt;&lt;/&gt; };
+                        ().into_view()
+                    },
                 }}
             &lt;/div&gt;
         &lt;/Show&gt;
diff --git a/crates/frontend/src/lib.rs b/crates/frontend/src/lib.rs
index f173a0f..2cad176 100644
--- a/crates/frontend/src/lib.rs
+++ b/crates/frontend/src/lib.rs
@@ -93,8 +93,6 @@ pub fn App() -&gt; impl IntoView {
 
     // Check server health and detect cold starts
     {
-        let is_warming = is_warming.clone();
-        let is_ready = is_ready.clone();
         spawn_local(async move {
             match api::health_check().await {
                 Ok(elapsed_ms) =&gt; {
diff --git a/crates/frontend/src/onboarding/storage.rs b/crates/frontend/src/onboarding/storage.rs
index c7b8db7..333dd07 100644
--- a/crates/frontend/src/onboarding/storage.rs
+++ b/crates/frontend/src/onboarding/storage.rs
@@ -106,5 +106,5 @@ pub fn increment_shortcut_usage() {
 
 /// Reset all onboarding progress (for testing)
 pub fn reset_onboarding() {
-    let _ = LocalStorage::delete(STORAGE_KEY);
+    LocalStorage::delete(STORAGE_KEY);
 }
diff --git a/crates/frontend/src/pages/dashboard.rs b/crates/frontend/src/pages/dashboard.rs
index ab924f5..0d00521 100644
--- a/crates/frontend/src/pages/dashboard.rs
+++ b/crates/frontend/src/pages/dashboard.rs
@@ -93,6 +93,7 @@ pub fn DashboardPage() -&gt; impl IntoView {
     let include_threat_intel = create_rw_signal(false);
     let use_user_credits = create_rw_signal(false);
     let use_plugins = create_rw_signal(false); // New plugin system toggle
+    let use_mock_data = create_rw_signal(false); // Mock report mode
 
     // Load preferences from localStorage
     let plugin_theme = create_rw_signal(crate::load_theme());
@@ -235,11 +236,11 @@ pub fn DashboardPage() -&gt; impl IntoView {
             match es {
                 Ok(event_source) =&gt; {
                     // Clone signals for closures
-                    let sp = streaming_progress.clone();
-                    let pd = preview_data.clone();
-                    let pl = preview_loading.clone();
-                    let _spm = show_preview_modal.clone();
-                    let _err = error.clone();
+                    let sp = streaming_progress;
+                    let pd = preview_data;
+                    let pl = preview_loading;
+                    let _spm = show_preview_modal;
+                    let _err = error;
                     let es_clone = event_source.clone();
 
                     // Message handler
@@ -326,8 +327,8 @@ pub fn DashboardPage() -&gt; impl IntoView {
                     onmessage.forget(); // Prevent closure from being dropped
 
                     // Error handler
-                    let sp_err = streaming_progress.clone();
-                    let pl_err = preview_loading.clone();
+                    let sp_err = streaming_progress;
+                    let pl_err = preview_loading;
                     let es_err = event_source.clone();
                     let onerror = Closure::wrap(Box::new(move |_: web_sys::Event| {
                         sp_err.update(|s| {
@@ -380,6 +381,7 @@ pub fn DashboardPage() -&gt; impl IntoView {
             threat_intel,
             template_id.as_deref(),
             use_plugins.get(),
+            use_mock_data.get(),
         );
 
         // Use JavaScript EventSource for SSE
@@ -394,9 +396,9 @@ pub fn DashboardPage() -&gt; impl IntoView {
         match es {
             Ok(event_source) =&gt; {
                 // Clone signals for closures
-                let report = report_html.clone();
-                let err = error.clone();
-                let gen = generating.clone();
+                let report = report_html;
+                let err = error;
+                let gen = generating;
                 let ti = threat_intel;
                 let es_clone = event_source.clone();
 
@@ -438,8 +440,8 @@ pub fn DashboardPage() -&gt; impl IntoView {
                 onmessage.forget();
 
                 // Error handler
-                let err_clone = error.clone();
-                let gen_clone = generating.clone();
+                let err_clone = error;
+                let gen_clone = generating;
                 let es_err = event_source.clone();
                 let onerror = Closure::wrap(Box::new(move |_: web_sys::Event| {
                     err_clone.set(Some(AppError::simple(
@@ -869,6 +871,20 @@ pub fn DashboardPage() -&gt; impl IntoView {
                                 &lt;/Show&gt;
                             &lt;/div&gt;
 
+                            // Mock Data Toggle (Dev)
+                            &lt;div class=&quot;mb-6 p-4 rounded-lg bg-indigo-900/20 border border-indigo-700/50&quot;&gt;
+                                &lt;label class=&quot;flex items-center gap-2 cursor-pointer&quot;&gt;
+                                    &lt;input
+                                        type=&quot;checkbox&quot;
+                                        class=&quot;w-5 h-5 rounded border-indigo-600 bg-zinc-700 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-zinc-900 cursor-pointer&quot;
+                                        prop:checked=move || use_mock_data.get()
+                                        on:change=move |ev| use_mock_data.set(event_target_checked(&amp;ev))
+                                    /&gt;
+                                    &lt;span class=&quot;text-white font-medium&quot;&gt;&quot;üß™ Mock Report Mode&quot;&lt;/span&gt;
+                                &lt;/label&gt;
+                                &lt;p class=&quot;text-zinc-500 text-xs mt-1 ml-7&quot;&gt;&quot;Genera un reporte con datos falsos completos para pruebas de dise√±o (ignora tenant/fechas)&quot;&lt;/p&gt;
+                            &lt;/div&gt;
+
                             &lt;button
                                 class=&quot;w-full bg-orange-600 hover:bg-orange-500 disabled:bg-zinc-700 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2&quot;
                                 disabled=move || generating.get()
diff --git a/crates/frontend/src/pages/editor.rs b/crates/frontend/src/pages/editor.rs
index 9609f47..9694029 100644
--- a/crates/frontend/src/pages/editor.rs
+++ b/crates/frontend/src/pages/editor.rs
@@ -187,8 +187,7 @@ pub fn EditorPage() -&gt; impl IntoView {
                     let demo_slides = crate::onboarding::get_sandbox_slides();
                     let new_slides: Vec&lt;EditorSlide&gt; = demo_slides
                         .iter()
-                        .enumerate()
-                        .map(|(_i, s)| EditorSlide {
+                        .map(|s| EditorSlide {
                             id: s.id.to_string(),
                             name: s.name.to_string(),
                             canvas_json: sandbox_slides_to_canvas_json(s),
@@ -977,7 +976,7 @@ pub fn EditorPage() -&gt; impl IntoView {
                     &lt;/CollapsibleSection&gt;
 
                     // Collapsible Placeholder Side Panel
-                    &lt;PlaceholderSidePanel on_insert=insert_placeholder.clone() /&gt;
+                    &lt;PlaceholderSidePanel on_insert=insert_placeholder /&gt;
 
                     // Smart Templates Analysis
                     &lt;TemplateAnalysisPanel slides=slides /&gt;
@@ -1070,7 +1069,7 @@ where
     I: Fn(String, String) + &apos;static + Clone,
 {
     // Category colors for visual distinction
-    let category_colors = vec![
+    let category_colors = [
         (&quot;üìã&quot;, &quot;#6366f1&quot;, &quot;#6366f120&quot;), // General - Indigo
         (&quot;üìä&quot;, &quot;#f97316&quot;, &quot;#f9731620&quot;), // M√©tricas - Orange
         (&quot;üéØ&quot;, &quot;#ef4444&quot;, &quot;#ef444420&quot;), // Amenazas - Red
diff --git a/docs/Developer-Guide.md b/docs/Developer-Guide.md
index 4fb456b..b3b6a38 100644
--- a/docs/Developer-Guide.md
+++ b/docs/Developer-Guide.md
@@ -105,6 +105,25 @@ axur-web/
 4. **Audit**: Run `cargo audit`
 5. **Document**: Update wiki pages
 
+## Mock Data &amp; Visual Testing
+
+The platform includes a **Mock Report Mode** to facilitate visual testing of report templates without needing real data or a specific tenant context.
+
+### Enabling Mock Mode
+1. Go to the Dashboard.
+2. In the &quot;Configuration&quot; card, enable the **&quot;üß™ Mock Report Mode&quot;** toggle.
+3. Click &quot;Generate Report&quot;.
+
+### Logic
+- **Frontend**: Sets `mock: true` in the API request.
+- **Backend**: `ReportService` intercepts the request and returns data generated by `PocReportData::demo()`.
+- **Core**: `PocReportData::demo()` creates a fully populated report structure with dummy data for all sections (Threats, Takedowns, Credential Leaks, etc.).
+
+### Use Cases
+- Designing new report templates.
+- Verifying layout responsiveness.
+- Testing specific data visualizations (e.g., charts, maps) with guaranteed data presence.
+
 ## Testing
 
 ```bash
</git_diff_work_tree><git_diff_staged></git_diff_staged></git_diffs><instruction># Project Context &amp; Directives (Persistent)

You are analyzing the **Antigravity / Axur-Web** project.
This context is automatically injected by Repomix to ensure consistency across all AI sessions.

## 1. üõ°Ô∏è The &quot;No Panic&quot; Doctrine (CRITICAL)
-   **NEVER** use `unwrap()` in production code.
-   **ALWAYS** handle errors gracefully using `Result&lt;T, E&gt;` or `Option&lt;T&gt;`.
-   **EXCEPTION:** Use `expect(&quot;reason&quot;)` ONLY during initialization/startup where failure is unrecoverable.
-   **Drafting:** If prototyping, add `// TODO: remove unwrap` comments.

## 2. üèóÔ∏è Architecture &amp; Stack
-   **Workspace:** Rust Workspace with multiple crates.
    -   `crates/backend`: Axum server (REST API). Runs on Google Cloud Run.
    -   `crates/frontend`: Leptos (WASM). Runs on Cloudflare Pages.
    -   `crates/core`: Shared logic, types, and domain models.
-   **Database:** Firestore (NoSQL).
-   **Environment:**
    -   **Host:** Windows 11.
    -   **Execution:** WSL 2 (Ubuntu). All `cargo` and `npm` commands run here.

## 3. üöÄ Deployment Constraints
-   **Backend:** Dockerized (Distroless/Debian Slim). Stateless.
-   **Frontend:** Static Asset (WASM + HTML/JS/CSS).
-   **Secrets:** Managed via Google Secret Manager (Runtime) and `.env` (Local).

## 4. üß† Agent Memory
-   Artifacts are stored in `.agent/` or `brain/`.
-   Use `task.md` to track progress.
-   Respect `.gitignore` and `repomix.config.json` filters.

## 5. ü§ñ Interaction Guidelines
-   When proposing changes, always consider the **System Safety** (No Panic).
-   Prefer **Incremental Changes** over massive rewrites.
-   If you see `unwrap()`, flag it as a violation.
</instruction></repomix>